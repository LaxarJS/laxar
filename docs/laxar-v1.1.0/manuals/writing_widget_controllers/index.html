<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../laxar.theme/img/favicon.ico">
        <title>LaxarJS  v1.1.0</title>

        <link rel="stylesheet" href="../../../laxar.theme/css/pygments.css">
        <link href="../../../laxar.theme/css/style.min.css" rel="stylesheet">

    </head>

    <body class="documentation">

      <header class="navbar  navbar-fixed-top" role="navigation">
    <div class="container">

        <div class="navbar-header navbar-inverse">
           <button class="navbar-toggle"
              type="button"
              data-toggle="collapse"
              data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
            <!-- Main title -->
            <a class="navbar-brand" href="http://www.laxarjs.org">
               <span class="ax-laxar-logo">Laxar<span>JS</span></span>
            </a>
         </div>

         <div class="navbar-collapse collapse navbar-inverse">
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         laxar <span class="caret"></span>
      </a>
         
         <ul class="dropdown-menu">
            
            <li><a href="../../../laxar-latest">laxar</a></li>
            
            <li><a href="../../../laxar-patterns-latest">laxar-patterns</a></li>
            
            <li><a href="../../../laxar-uikit-latest">laxar-uikit</a></li>
            
            <li><a href="../../../laxar-mocks-latest">laxar-mocks</a></li>
            
            <li><a href="../../../laxar-loader-latest">laxar-loader</a></li>
            
            <li><a href="../../../laxar-tooling-latest">laxar-tooling</a></li>
            
            <li><a href="../../../laxar-angular-adapter-latest">laxar-angular-adapter</a></li>
            
            <li><a href="../../../laxar-angular2-adapter-latest">laxar-angular2-adapter</a></li>
            
            <li><a href="../../../laxar-react-adapter-latest">laxar-react-adapter</a></li>
            
            <li><a href="../../../laxar-vue-adapter-latest">laxar-vue-adapter</a></li>
            
            <li><a href="../../../generator-laxarjs-latest">generator-laxarjs</a></li>
            
            <li><a href="../../../generator-laxarjs2-latest">generator-laxarjs2</a></li>
            
            <li><a href="../../../grunt-laxar-latest">grunt-laxar</a></li>
            
         </ul>
         
   </li>
</ul>
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         v1.1.0 <span class="caret"></span>
      </a>
      
      <ul class="dropdown-menu">
         
            <li class="ax-dropdown-headline">Latest</li>
            
               <li><a href="../../../laxar-v2-latest">v2.0.3</a></li>
            
               <li><a href="../../../laxar-v1-latest">v1.3.5</a></li>
            
               <li><a href="../../../laxar-v0-latest">v0.26.2</a></li>
            
            <li role="separator" class="divider"></li>
         
         <li class="ax-dropdown-headline">All Releases</li>
         
            <li><a href="../../../laxar-v2.0.3">v2.0.3</a></li>
         
            <li><a href="../../../laxar-v2.0.2">v2.0.2</a></li>
         
            <li><a href="../../../laxar-v2.0.1">v2.0.1</a></li>
         
            <li><a href="../../../laxar-v2.0.0">v2.0.0</a></li>
         
            <li><a href="../../../laxar-v1.3.5">v1.3.5</a></li>
         
            <li><a href="../../../laxar-v1.3.4">v1.3.4</a></li>
         
            <li><a href="../../../laxar-v1.3.3">v1.3.3</a></li>
         
            <li><a href="../../../laxar-v1.3.2">v1.3.2</a></li>
         
            <li><a href="../../../laxar-v1.3.1">v1.3.1</a></li>
         
            <li><a href="../../../laxar-v1.3.0">v1.3.0</a></li>
         
            <li><a href="../../../laxar-v1.2.10">v1.2.10</a></li>
         
            <li><a href="../../../laxar-v1.2.9">v1.2.9</a></li>
         
            <li><a href="../../../laxar-v1.2.8">v1.2.8</a></li>
         
            <li><a href="../../../laxar-v1.2.7">v1.2.7</a></li>
         
            <li><a href="../../../laxar-v1.2.6">v1.2.6</a></li>
         
            <li><a href="../../../laxar-v1.2.5">v1.2.5</a></li>
         
            <li><a href="../../../laxar-v1.2.4">v1.2.4</a></li>
         
            <li><a href="../../../laxar-v1.2.3">v1.2.3</a></li>
         
            <li><a href="../../../laxar-v1.2.2">v1.2.2</a></li>
         
            <li><a href="../../../laxar-v1.2.1">v1.2.1</a></li>
         
            <li><a href="../../../laxar-v1.2.0">v1.2.0</a></li>
         
            <li><a href="../../../laxar-v1.1.0">v1.1.0</a></li>
         
            <li><a href="../../../laxar-v1.0.5">v1.0.5</a></li>
         
            <li><a href="../../../laxar-v1.0.4">v1.0.4</a></li>
         
            <li><a href="../../../laxar-v1.0.3">v1.0.3</a></li>
         
            <li><a href="../../../laxar-v1.0.2">v1.0.2</a></li>
         
            <li><a href="../../../laxar-v1.0.1">v1.0.1</a></li>
         
            <li><a href="../../../laxar-v1.0.0">v1.0.0</a></li>
         
            <li><a href="../../../laxar-v0.26.2">v0.26.2</a></li>
         
            <li><a href="../../../laxar-v0.26.1">v0.26.1</a></li>
         
            <li><a href="../../../laxar-v0.26.0">v0.26.0</a></li>
         
            <li><a href="../../../laxar-v0.25.1">v0.25.1</a></li>
         
            <li><a href="../../../laxar-v0.25.0">v0.25.0</a></li>
         
            <li><a href="../../../laxar-v0.24.0">v0.24.0</a></li>
         
            <li><a href="../../../laxar-v0.23.3">v0.23.3</a></li>
         
            <li><a href="../../../laxar-v0.23.2">v0.23.2</a></li>
         
            <li><a href="../../../laxar-v0.23.1">v0.23.1</a></li>
         
            <li><a href="../../../laxar-v0.23.0">v0.23.0</a></li>
         
            <li><a href="../../../laxar-v0.22.2">v0.22.2</a></li>
         
            <li><a href="../../../laxar-v0.22.1">v0.22.1</a></li>
         
            <li><a href="../../../laxar-v0.22.0">v0.22.0</a></li>
         
            <li><a href="../../../laxar-v0.21.0">v0.21.0</a></li>
         
            <li><a href="../../../laxar-v0.20.1">v0.20.1</a></li>
         
            <li><a href="../../../laxar-v0.20.0">v0.20.0</a></li>
         
            <li><a href="../../../laxar-v0.19.1">v0.19.1</a></li>
         
            <li><a href="../../../laxar-v0.19.0">v0.19.0</a></li>
         
            <li><a href="../../../laxar-v0.18.2">v0.18.2</a></li>
         
            <li><a href="../../../laxar-v0.18.1">v0.18.1</a></li>
         
            <li><a href="../../../laxar-v0.18.0">v0.18.0</a></li>
         
            <li><a href="../../../laxar-v0.17.1">v0.17.1</a></li>
         
            <li><a href="../../../laxar-v0.17.0">v0.17.0</a></li>
         
            <li><a href="../../../laxar-v0.16.2">v0.16.2</a></li>
         
            <li><a href="../../../laxar-v0.16.1">v0.16.1</a></li>
         
            <li><a href="../../../laxar-v0.16.0">v0.16.0</a></li>
         
            <li><a href="../../../laxar-v0.15.0">v0.15.0</a></li>
         
            <li><a href="../../../laxar-v0.14.0">v0.14.0</a></li>
         
            <li><a href="../../../laxar-v0.13.3">v0.13.3</a></li>
         
            <li><a href="../../../laxar-v0.13.2">v0.13.2</a></li>
         
            <li><a href="../../../laxar-v0.13.1">v0.13.1</a></li>
         
            <li><a href="../../../laxar-v0.13.0">v0.13.0</a></li>
         
            <li><a href="../../../laxar-v0.12.1">v0.12.1</a></li>
         
            <li><a href="../../../laxar-v0.12.0">v0.12.0</a></li>
         
            <li><a href="../../../laxar-v0.11.1">v0.11.1</a></li>
         
            <li><a href="../../../laxar-v0.11.0">v0.11.0</a></li>
         
            <li><a href="../../../laxar-v0.10.1">v0.10.1</a></li>
         
            <li><a href="../../../laxar-v0.10.0">v0.10.0</a></li>
         
            <li><a href="../../../laxar-v0.9.11">v0.9.11</a></li>
         
            <li><a href="../../../laxar-v0.9.10">v0.9.10</a></li>
         
            <li><a href="../../../laxar-v0.9.9">v0.9.9</a></li>
         
            <li><a href="../../../laxar-v0.9.8">v0.9.8</a></li>
         
            <li><a href="../../../laxar-v0.9.7">v0.9.7</a></li>
         
            <li><a href="../../../laxar-v0.9.6">v0.9.6</a></li>
         
            <li><a href="../../../laxar-v0.9.5">v0.9.5</a></li>
         
            <li><a href="../../../laxar-v0.9.4">v0.9.4</a></li>
         
            <li><a href="../../../laxar-v0.9.3">v0.9.3</a></li>
         
            <li><a href="../../../laxar-v0.9.2">v0.9.2</a></li>
         
            <li><a href="../../../laxar-v0.9.1">v0.9.1</a></li>
         
            <li><a href="../../../laxar-v0.9.0">v0.9.0</a></li>
         
      </ul>
      
   </li>
</ul>

            <ul class="nav navbar-nav">
               
                  
               
                  
                     <li >
                        <a href="../../CHANGELOG/">Changelog</a>
                     </li>
                  
               
                  
               
                  
               
                  
               
                  
               
                  
               
               
                <!-- Repo link -->
                
                <li>
                    <a class="ax-external" href="https://github.com/LaxarJS/laxar/tree/v1.1.0">
                       <i class="fa fa-github"></i> GitHub
                    </a>
                </li>
                
            </ul>
            <a class="ax-navbar-additional"
               target="_blank"
               href="http://laxarjs.github.io/widget-browser/#/widgetBrowser">Widgets</a>
        </div>
    </div>
</header>

      <div class="container content">
        <div class="row">
           <sidebar class="col-sm-4 col-xs-12"><div class="bs-sidebar hidden-print" role="complementary">
   <h3>Documentation</h3>
   <ul class="nav bs-sidenav">
   
      
         
            <li class="main"><a title="README" href="../..#start">README</a></li>
         
      
   
      
         
         
      
   
      
         
            <li class="main"><a title="LaxarJS Concepts" href="../../concepts/#start">LaxarJS Concepts</a></li>
         
      
   
      
         
            <li class="main"><a title="Why LaxarJS?" href="../../why_laxar/#start">Why LaxarJS?</a></li>
         
      
   
      
         <li class="main ax-collapse " >
            <a class="ax-link"
               href="javascript:void(0)"
               title="API"
               data-toggle="collapse"
               data-target="#API"
               aria-expanded="false"
               aria-controls="collapseExample">API <span class="caret"></span></a>

            <ul class="nav subnav collapse"
               id="API">
               
               <li >
                  <a title="assert" href="../../api/assert.js/#start">assert</a>
               </li>
               
               <li >
                  <a title="axId" href="../../api/id.js/#start">axId</a>
               </li>
               
               <li >
                  <a title="axLayout" href="../../api/layout.js/#start">axLayout</a>
               </li>
               
               <li >
                  <a title="axRuntimeServices" href="../../api/runtime_services.js/#start">axRuntimeServices</a>
               </li>
               
               <li >
                  <a title="axWidgetArea" href="../../api/widget_area.js/#start">axWidgetArea</a>
               </li>
               
               <li >
                  <a title="configuration" href="../../api/configuration.js/#start">configuration</a>
               </li>
               
               <li >
                  <a title="controls_service" href="../../api/controls_service.js/#start">controls_service</a>
               </li>
               
               <li >
                  <a title="event_bus" href="../../api/event_bus.js/#start">event_bus</a>
               </li>
               
               <li >
                  <a title="file_resource_provider" href="../../api/file_resource_provider.js/#start">file_resource_provider</a>
               </li>
               
               <li >
                  <a title="flow" href="../../api/flow.js/#start">flow</a>
               </li>
               
               <li >
                  <a title="fn" href="../../api/fn.js/#start">fn</a>
               </li>
               
               <li >
                  <a title="i18n" href="../../api/i18n.js/#start">i18n</a>
               </li>
               
               <li >
                  <a title="log" href="../../api/log.js/#start">log</a>
               </li>
               
               <li >
                  <a title="object" href="../../api/object.js/#start">object</a>
               </li>
               
               <li >
                  <a title="object" href="../../api/string.js/#start">object</a>
               </li>
               
               <li >
                  <a title="storage" href="../../api/storage.js/#start">storage</a>
               </li>
               
               <li >
                  <a title="theme_manager" href="../../api/theme_manager.js/#start">theme_manager</a>
               </li>
               
            </ul>
         </li>
      
   
      
         <li class="main ax-collapse " >
            <a class="ax-link"
               href="javascript:void(0)"
               title="Contributing"
               data-toggle="collapse"
               data-target="#Contributing"
               aria-expanded="false"
               aria-controls="collapseExample">Contributing <span class="caret"></span></a>

            <ul class="nav subnav collapse"
               id="Contributing">
               
               <li >
                  <a title="LaxarJS Coding Styles" href="../../contributing/styleguide/#start">LaxarJS Coding Styles</a>
               </li>
               
            </ul>
         </li>
      
   
      
         <li class="main ax-collapse ax-active" >
            <a class="ax-link"
               href="javascript:void(0)"
               title="Manuals"
               data-toggle="collapse"
               data-target="#Manuals"
               aria-expanded="false"
               aria-controls="collapseExample">Manuals <span class="caret"></span></a>

            <ul class="nav subnav in"
               id="Manuals">
               
               <li >
                  <a title="Overview" href="../#start">Overview</a>
               </li>
               
               <li >
                  <a title="Assets and the FileResourceProvider" href="../asset_lookup/#start">Assets and the FileResourceProvider</a>
               </li>
               
               <li >
                  <a title="Configuring RequireJS for Widgets and Controls" href="../configuring_requirejs/#start">Configuring RequireJS for Widgets and Controls</a>
               </li>
               
               <li >
                  <a title="Controls and Libraries" href="../providing_controls/#start">Controls and Libraries</a>
               </li>
               
               <li >
                  <a title="Creating Themes" href="../creating_themes/#start">Creating Themes</a>
               </li>
               
               <li >
                  <a title="Creating an Adapter for a new Widget Technology" href="../adapters/#start">Creating an Adapter for a new Widget Technology</a>
               </li>
               
               <li >
                  <a title="Events and Publish-Subscribe" href="../events/#start">Events and Publish-Subscribe</a>
               </li>
               
               <li >
                  <a title="Flow and Places" href="../flow_and_places/#start">Flow and Places</a>
               </li>
               
               <li >
                  <a title="Infrastructure and Tools" href="../infrastructure_and_tools/#start">Infrastructure and Tools</a>
               </li>
               
               <li >
                  <a title="Installing Controls" href="../installing_controls/#start">Installing Controls</a>
               </li>
               
               <li >
                  <a title="Installing Third Party Widgets" href="../installing_widgets/#start">Installing Third Party Widgets</a>
               </li>
               
               <li >
                  <a title="Internationalizing a Widget" href="../i18n/#start">Internationalizing a Widget</a>
               </li>
               
               <li >
                  <a title="LaxarJS Configuration in an Application" href="../configuration/#start">LaxarJS Configuration in an Application</a>
               </li>
               
               <li >
                  <a title="Widgets and Activities" href="../widgets_and_activities/#start">Widgets and Activities</a>
               </li>
               
               <li >
                  <a title="Writing Compositions" href="../writing_compositions/#start">Writing Compositions</a>
               </li>
               
               <li >
                  <a title="Writing Pages" href="../writing_pages/#start">Writing Pages</a>
               </li>
               
               <li class="ax-active">
                  <a title="Writing Widget Controllers" href="./#start">Writing Widget Controllers</a>
               </li>
               
            </ul>
         </li>
      
   
    </ul>
</div></sidebar>
           <main class="col-sm-8 col-xs-12 " role="main">

<a name="start" class="ax-anchor"></a>
<p><a href="../">« return to the manuals</a></p>
<p>Preliminary readings:</p>
<ul>
<li><a href="../../concepts/">LaxarJS Core Concepts</a></li>
<li><a href="../widgets_and_activities/">Widgets and Activities</a></li>
</ul>
<h1 id="writing-widget-controllers">Writing Widget Controllers</h1>
<p>The basic layout and properties of a widget controller and its module depend on the underlying integration technology.
As soon as this is set up, communication mostly takes place over the event bus using common <a href="../events/">events</a>, and all functional code is written in the style specific to the according technology.
Additionally some libraries may be used to simplify recurring tasks, like e.g. <a href="https://github.com/LaxarJS/laxar-patterns/">LaxarJS Patterns</a> for common event bus interaction patterns. </p>
<p>The purpose of this manual is to describe how a basic setup for a widget using one of the builtin technologies is established.</p>
<h2 id="selecting-an-integration-technology">Selecting an Integration Technology</h2>
<p>The selection of an integration technology takes place in the <code>widget.json</code> of the according widget.</p>
<p>For example:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my-plain-widget&quot;</span><span class="p">,</span>
   <span class="nt">&quot;integration&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;widget&quot;</span><span class="p">,</span>
      <span class="nt">&quot;technology&quot;</span><span class="p">:</span> <span class="s2">&quot;plain&quot;</span>
   <span class="p">},</span>
   <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="err">...</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>For now this is limited to <code>angular</code> and <code>plain</code>.
In case you developed <a href="../adapters/">your own widget adapter</a>, this is of course available as well under the name the adapter exports as <code>technology</code> property.</p>
<h2 id="available-integration-technologies">Available Integration Technologies</h2>
<p>Out of the box LaxarJS currently supports two different integration technologies:
Plain Javascript widgets and widgets defining an <em>AngularJS</em> module and controller.
In the following both technologies are described.</p>
<p>Note that for the time being all widgets have to be defined as <a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD module</a>, since this is the way LaxarJS bootstraps them.</p>
<h3 id="plain-javascript-widgets">Plain JavaScript Widgets</h3>
<p>Plain JavaScript widgets are bootstrapped without any specific library or framework.
This allows the implementation of a widget in pure vanilla JavaScript, or the direct usage of smaller, non-invasive libraries for rendering and controller implementation.
For example a chart widget can be implemented using just <a href="http://d3js.org/">D3.js</a> directly, to render a chart into an SVG element.
Even more obviously activities can be implemented using the <em>plain</em> integration technology, because there is no need at all for a UI rendering library.</p>
<p>When implementing a plain widget, its AMD module must simply return an object with three properties, where two are mandatory:</p>
<ul>
<li>
<p><code>name</code>: this is the name of the widget's module and <strong>must</strong> equal the <code>name</code> property in the <code>widget.json</code> in camel-case notation with lower-case first letter.
  If for example the widget is named <em>ax-messages-widget</em>, the <code>name</code> property must be set to <em>axMessagesWidget</em>.</p>
</li>
<li>
<p><code>create</code>: this is the bootstrapping function for a controller instance.</p>
</li>
</ul>
<p>In case of an activity (which has no html template) there is no need to return anything in here.
  If on the other hand a widget should have its UI rendered as child of the area it was added to, this function <strong>must</strong> return an object with a <code>renderTo</code> function as single property.
  This function will be called as soon as the widget instance is attached to the DOM.
  It receives the wrapper <code>div</code> element created by the widget adapter as single argument. 
  When this function is called, the contents of the HTML template were already added to this element via <code>innerHTML</code>.</p>
<p>Arguments for the <code>create</code> function are derived of the optional <code>injections</code> list explained in the following.</p>
<ul>
<li><code>injections</code>: an optional listing of services to inject into the <code>create</code> function.
  Each item is the name of a service to inject into a new controller instance.
  The order in this list determines the order the services are passed into the <code>create</code> function.</li>
</ul>
<p>Available injections are <a href="#available-injections">listed later in this document</a>.</p>
<p>An example of a simple plain widget, called <code>my-plain-widget</code>:</p>
<div class="codehilite"><pre><span></span><span class="nx">define</span><span class="p">(</span> <span class="p">[</span> <span class="s1">&#39;laxar-patterns&#39;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">patterns</span> <span class="p">)</span> <span class="p">{</span>

   <span class="k">return</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;myPlainWidget&#39;</span><span class="p">,</span>
      <span class="nx">injections</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;axContext&#39;</span> <span class="p">],</span>
      <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
         <span class="c1">// LaxarJS Patterns works great with plain widgets.</span>
         <span class="c1">// The according resource will be updated on `context.resources.myResource`</span>
         <span class="nx">patterns</span><span class="p">.</span><span class="nx">resources</span><span class="p">.</span><span class="nx">handlerFor</span><span class="p">(</span> <span class="nx">context</span> <span class="p">)</span>
            <span class="p">.</span><span class="nx">registerResourceFromFeature</span><span class="p">(</span> <span class="s1">&#39;myResource&#39;</span> <span class="p">);</span>

         <span class="k">if</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">features</span><span class="p">.</span><span class="nx">fancyFeature</span><span class="p">.</span><span class="nx">something</span> <span class="p">)</span> <span class="p">{</span>
            <span class="c1">// do something fancy if the feature is set</span>
         <span class="p">}</span>

         <span class="k">return</span> <span class="p">{</span>
            <span class="nx">renderTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">element</span> <span class="p">)</span> <span class="p">{</span>
               <span class="c1">// The widget is attached to the DOM and may do something</span>
               <span class="c1">// with its rendered template</span>
               <span class="nx">element</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span> <span class="s1">&#39;.output&#39;</span> <span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="p">};</span>

      <span class="p">}</span>
   <span class="p">};</span>

<span class="p">}</span> <span class="p">);</span>
</pre></div>


<p>Assume this as the accompanying template:</p>
<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My Plain Widget<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>


<p>When the LaxarJS runtime calls <code>renderTo</code> with the anchor element, the <code>h1</code> and <code>span</code> elements are already appended to it.
Hence, the call to <code>querySelector</code> will successfully return the <code>span</code> with class <code>output</code>, and its HTML content is set to "Hello World".
Anything else, like including and using external libraries for example, is left to the user.</p>
<h3 id="angularjs-1x-widgets">AngularJS (1.x) Widgets</h3>
<p>In contrast to that AngularJS widgets are defined by using standard AngularJS APIs:
The AMD module must return an AngularJS module, following the naming scheme for plain widgets, where the module name <strong>must</strong> equal the <code>name</code> property in the <code>widget.json</code> in camel-case notation with lower-case first letter.
The widget controller must be the module name, with "Controller" appended and upper-case first letter (taken from <a href="https://github.com/johnpapa/angular-styleguide#controller-names">John Papa's style guide</a>, which is linked to from <a href="http://angularjs.blogspot.de/2014/02/an-angularjs-style-guide-and-best.html">the official AngularJS blog</a>).
If for example the widget is called <em>my-first-angular-widget</em>, the module would be named <em>myFirstAngularWidget</em> and the controller <em>MyFirstAngularWidgetController</em> as a consequence.</p>
<p>Just like it is the case for plain widgets, the template will be wrapped in a <code>div</code> element and automatically appended to the DOM subtree of the according widget area.
Additionally after compilation it is linked to an AngularJS Scope, which can be injected into the controller as <code>$scope</code>.
All injections mentioned for plain widgets are also available via default AngularJS DI mechanisms, in addition to those offered by AngularJS out of the box.
It is also possible to define widget specific directives, filters and services directly on the widget module.
There are no artificial restrictions for AngularJS widgets, but always consider extracting a directive or service, that might be of use for other widget authors, into a separate <a href="../providing_controls/">control</a>.</p>
<p>Here is an example using AngularJS as technology to achieve the same as the widget above (but we'll call it <code>my-angular-widget</code> here):</p>
<div class="codehilite"><pre><span></span><span class="nx">define</span><span class="p">(</span> <span class="p">[</span> <span class="s1">&#39;angular&#39;</span><span class="p">,</span> <span class="s1">&#39;laxar-patterns&#39;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">ng</span><span class="p">,</span> <span class="nx">patterns</span> <span class="p">)</span> <span class="p">{</span>

   <span class="c1">// We always use named injections to be save when applying minification.</span>
   <span class="c1">// We chose this rather strange syntax utilizing function hoisting, to prevent from</span>
   <span class="c1">// too many array brackets and nevertheless have the names next to the actual</span>
   <span class="c1">// controller arguments. Feel free to write this anyway you like and feel</span>
   <span class="c1">// comfortable with when defining controllers in AngularJS.</span>
   <span class="nx">Controller</span><span class="p">.</span><span class="nx">$inject</span><span class="p">(</span> <span class="s1">&#39;$scope&#39;</span> <span class="p">);</span>

   <span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span> <span class="nx">$scope</span> <span class="p">)</span> <span class="p">{</span>

      <span class="c1">// In AngularJS we set scope properties and never manipulate the DOM directly</span>
      <span class="c1">// from within a controller.</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">myString</span> <span class="o">=</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">;</span>

      <span class="c1">// Notice how we can use $scope instead of axContext here, as both provide the</span>
      <span class="c1">// same relevant properties for the patterns library.</span>
      <span class="nx">patterns</span><span class="p">.</span><span class="nx">resources</span><span class="p">.</span><span class="nx">handlerFor</span><span class="p">(</span> <span class="nx">$scope</span> <span class="p">)</span>
         <span class="p">.</span><span class="nx">registerResourceFromFeature</span><span class="p">(</span> <span class="s1">&#39;myResource&#39;</span> <span class="p">);</span>

      <span class="k">if</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">features</span><span class="p">.</span><span class="nx">fancyFeature</span><span class="p">.</span><span class="nx">something</span> <span class="p">)</span> <span class="p">{</span>
         <span class="c1">// do something fancy if the feature is set</span>
      <span class="p">}</span>
   <span class="p">}</span>

   <span class="c1">// Finally, we return the module with our controller.</span>
   <span class="k">return</span> <span class="nx">ng</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s1">&#39;myAngularWidget&#39;</span> <span class="p">)</span>
      <span class="p">.</span><span class="nx">controller</span><span class="p">(</span> <span class="s1">&#39;MyAngularWidgetController&#39;</span><span class="p">,</span> <span class="nx">Controller</span> <span class="p">);</span>

<span class="p">}</span> <span class="p">);</span>
</pre></div>


<p>The template then looks like this:</p>
<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My Angular Widget<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">&gt;</span>{{ myString }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>


<h2 id="available-injections">Available Injections</h2>
<p>For both integration types the same basic set of injectable services or objects is available.
In case of AngularJS widgets it is of course possible to add more services to the list via standard dependency injection mechanisms.
On the other hand the <code>$scope</code> is not available for plain widgets, but <code>axContext</code> should provide all the useful parts.
But out of the box these are the injections provided by LaxarJS:</p>
<ul>
<li>
<p><code>axEventBus</code>: the <a href="../../api/event_bus.js/">event bus</a> instance for this widget.</p>
</li>
<li>
<p><code>axFeatures</code>: the features configured for this widget (see <a href="../widgets_and_activities/#configuration-options">here</a> and <a href="../writing_pages/">here</a> for more information regarding features).</p>
</li>
<li>
<p><code>axContext</code>: this is a complete object containing all configuration and api specifically available to this widget instance and has mostly the same properties as the <code>$scope</code> injection  of an AngularJS widget.
  The <code>axEventBus</code> and <code>axFeatures</code> injections explained before are available as <code>eventBus</code> and <code>features</code> properties of <code>axContext</code>.
  In addition the context provides an <code>id</code> function to generate globally unique ids using a short, local reference, and a <code>widget</code> object providing some more details of the widget instance.
  While the <code>id</code> function should always be used when creating ids within a widget, the <code>widget</code> property should simply be ignored.</p>
</li>
<li>
<p><code>axFlowService</code>: a service offering tasks regarding the flow, to e.g. create links for navigation to a place or target.
  So if for example you don't want navigation to happen only programmatically but use accessible <code>a</code> elements, you can find the right tool there.
  Have a look at the <a href="../../api/flow.js/">api docs</a> for further information.</p>
</li>
<li>
<p><a href="../../api/runtime_services.js/">Runtime Services</a>: all injectable services defined in the runtime services of LaxarJS.
  For detailed information on the available services have a look at the according <a href="../../api/runtime_services.js/">api docs</a>.</p>
</li>
</ul>
<p><strong>Important note</strong>: The <code>axGlobalEventBus</code> should <strong>never</strong> be used directly in a widget implementation, if you don't know what you are doing.
  The problem is, that firstly the sender information will not automatically be set for you when publishing events, and secondly subscriptions won't get removed when the widget is destroyed due to navigation.
  Especially the latter problem can have a severe impact, as this introduces a memory leak, possibly over the full function scope of the widget controller.
  The memory will only get released when navigating away from the LaxarJS application or refreshing the page via browser refresh.</p>
<h2 id="byoa-bring-your-own-adapter">BYOA (Bring Your Own Adapter)</h2>
<p>If the existing integration technologies don't satisfy your needs and you need to implement your own adapter, just have a look at the according <a href="../adapters/">documentation</a>.
The builtin adapters are a good reference to start with.</p></main>
        </div>
      </div>

      <footer>
   <div class="container">
      <div class="ax-copyright">
         <span>
            
         </span>

         <ul class="ax-social">
            
               <li><a class="fa fa-twitter-square" target="_blank" href="https://twitter.com/laxarjs"></a></li>
            
            
               <li><a class="fa fa-rss-square" target="_blank" title="Subscribe to our RSS-feed" href="http://laxarjs.org/rss"></a></li>
            
         </ul>
      </div>
   </div>
</footer>

      <script src="../../../laxar.theme/js/jquery-1.10.2.min.js"></script>
      <script src="../../../laxar.theme/js/bootstrap-3.0.3.min.js"></script>
      <script src="../../../laxar.theme/js/base.js"></script>
   </body>
</html>