<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="./../laxar.theme/img/favicon.ico">
        <title>LaxarJS React Adapter v0.2.0</title>

        <link rel="stylesheet" href="./../laxar.theme/css/pygments.css">
        <link href="./../laxar.theme/css/style.min.css" rel="stylesheet">

    </head>

    <body class="documentation">

      <header class="navbar  navbar-fixed-top" role="navigation">
    <div class="container">

        <div class="navbar-header navbar-inverse">
           <button class="navbar-toggle"
              type="button"
              data-toggle="collapse"
              data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
            <!-- Main title -->
            <a class="navbar-brand" href="http://www.laxarjs.org">
               <span class="ax-laxar-logo">Laxar<span>JS</span></span>
            </a>
         </div>

         <div class="navbar-collapse collapse navbar-inverse">
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         laxar-react-adapter <span class="caret"></span>
      </a>
         
         <ul class="dropdown-menu">
            
            <li><a href="./../laxar-latest">laxar</a></li>
            
            <li><a href="./../laxar-patterns-latest">laxar-patterns</a></li>
            
            <li><a href="./../laxar-uikit-latest">laxar-uikit</a></li>
            
            <li><a href="./../laxar-mocks-latest">laxar-mocks</a></li>
            
            <li><a href="./../laxar-loader-latest">laxar-loader</a></li>
            
            <li><a href="./../laxar-tooling-latest">laxar-tooling</a></li>
            
            <li><a href="./../laxar-angular-adapter-latest">laxar-angular-adapter</a></li>
            
            <li><a href="./../laxar-angular2-adapter-latest">laxar-angular2-adapter</a></li>
            
            <li><a href="./../laxar-react-adapter-latest">laxar-react-adapter</a></li>
            
            <li><a href="./../laxar-vue-adapter-latest">laxar-vue-adapter</a></li>
            
            <li><a href="./../generator-laxarjs-latest">generator-laxarjs</a></li>
            
            <li><a href="./../generator-laxarjs2-latest">generator-laxarjs2</a></li>
            
            <li><a href="./../grunt-laxar-latest">grunt-laxar</a></li>
            
         </ul>
         
   </li>
</ul>
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         v0.2.0 <span class="caret"></span>
      </a>
      
      <ul class="dropdown-menu">
         
            <li class="ax-dropdown-headline">Latest</li>
            
               <li><a href="./../laxar-react-adapter-v2-latest">v2.0.0</a></li>
            
               <li><a href="./../laxar-react-adapter-v0-latest">v0.4.0</a></li>
            
            <li role="separator" class="divider"></li>
         
         <li class="ax-dropdown-headline">All Releases</li>
         
            <li><a href="./../laxar-react-adapter-v2.0.0">v2.0.0</a></li>
         
            <li><a href="./../laxar-react-adapter-v0.4.0">v0.4.0</a></li>
         
            <li><a href="./../laxar-react-adapter-v0.3.0">v0.3.0</a></li>
         
            <li><a href="./../laxar-react-adapter-v0.2.0">v0.2.0</a></li>
         
            <li><a href="./../laxar-react-adapter-v0.1.0">v0.1.0</a></li>
         
      </ul>
      
   </li>
</ul>

            <ul class="nav navbar-nav">
               
                  
               
                  
                     <li >
                        <a href="CHANGELOG/">Changelog</a>
                     </li>
                  
               
               
                <!-- Repo link -->
                
                <li>
                    <a class="ax-external" href="https://github.com/LaxarJS/laxar-react-adapter/tree/v0.2.0">
                       <i class="fa fa-github"></i> GitHub
                    </a>
                </li>
                
            </ul>
            <a class="ax-navbar-additional"
               target="_blank"
               href="http://laxarjs.github.io/widget-browser/#/widgetBrowser">Widgets</a>
        </div>
    </div>
</header>

      <div class="container content">
        <div class="row">
           <sidebar class="col-sm-4 col-xs-12"><div class="bs-sidebar hidden-print" role="complementary">
   <h3>Documentation</h3>
   <ul class="nav bs-sidenav">
   
      
         
            <li class="main ax-active"><a title="README" href=".#start">README</a></li>
         
      
   
      
         
         
      
   
    </ul>
</div></sidebar>
           <main class="col-sm-8 col-xs-12 " role="main">

<a name="start" class="ax-anchor"></a>
<h1 id="laxarjs-react-adapter">LaxarJS React Adapter</h1>
<blockquote>
<p>Write LaxarJS widgets and controls in React</p>
</blockquote>
<h2 id="installation">Installation</h2>
<div class="codehilite"><pre><span class="go">bower install laxar-react-adapter</span>
</pre></div>


<p>This will automatically install React if not already installed.</p>
<p>Add the React adapter to your bootstrapping modules, by editing the <code>init.js</code> of your LaxarJS project.
You will need to adjust the RequireJS imports, as well as the second argument to <code>ax.bootstrap</code>: </p>
<div class="codehilite"><pre><span class="nx">require</span><span class="p">(</span> <span class="p">[</span>
   <span class="cm">/* existing dependencies ... */</span><span class="p">,</span> 
   <span class="s1">&#39;laxar-react-adapter&#39;</span>
<span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="cm">/* laxar, applicationModules, resources, ... */</span><span class="p">,</span> <span class="nx">reactAdapter</span> <span class="p">)</span> <span class="p">{</span>
   <span class="c1">// ... setup file listings etc. ...</span>
   <span class="nx">ax</span><span class="p">.</span><span class="nx">bootstrap</span><span class="p">(</span> <span class="cm">/* applicationModules */</span><span class="p">,</span> <span class="p">[</span> <span class="nx">reactAdapter</span> <span class="p">]</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</pre></div>


<p>If you already have other custom adapters in your project, simply add the React adapter to your current list.</p>
<h2 id="usage">Usage</h2>
<p>With the adapter in place, you can now write widgets and controls using React.
The integration technology <em>"react"</em> is very similar to <em>"plain"</em>.</p>
<h3 id="creating-a-react-widget">Creating a React Widget</h3>
<p>You can use the LaxarJS generator for Yeoman to create a <em>plain</em> widget, then turn it into a React widget:</p>
<ol>
<li>
<p>Change the integration technology (in the <code>widget.json</code> descriptor) to <code>"react"</code>.</p>
</li>
<li>
<p>The widget module (e.g. <code>my-widget.js</code>), should export an object with three properties (<code>name</code>, <code>injections</code>, <code>create</code>), just like a plain widget would.
The <code>create</code> method should setup the widget controller and subscribe to events.
It must return an object with a function property <code>onDomAttached</code> which is called by the React adapter as soon as the widget DOM has been instantiated and attached to teh page DOM.</p>
</li>
<li>
<p>To render something into its dom node, the widget must request the injection <code>axReactRender</code> which is provided by the react adapter.
This injected function is a no-op as long as the widget is invisible (e.g. in a background-tab, or within a closed popup).
As soon as the widget has been attached to the page DOM, <code>axReactRender</code> goes through to <code>React.render</code>.</p>
</li>
</ol>
<p>Here is an example widget controller for a widget named <em>my-counter-widget</em>.
It simply subscribes to all takeActionRequest events and keeps displaying a running total of requested actions:</p>
<div class="codehilite"><pre><span class="nx">define</span><span class="p">(</span> <span class="p">[</span> <span class="s1">&#39;react&#39;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">React</span> <span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;my-counter-widget&#39;</span><span class="p">,</span>
      <span class="nx">injections</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;axEventBus&#39;</span><span class="p">,</span> <span class="s1">&#39;axReactRender&#39;</span> <span class="p">],</span>
      <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">eventBus</span><span class="p">,</span> <span class="nx">reactRender</span> <span class="p">)</span> <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="nx">eventBus</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span> <span class="s1">&#39;takeActionRequest&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="o">++</span><span class="nx">counter</span><span class="p">;</span>
            <span class="nx">render</span><span class="p">();</span>
         <span class="p">}</span> <span class="p">);</span>
         <span class="kd">function</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">reactRender</span><span class="p">(</span>
               <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;h1&#39;</span><span class="p">,</span> <span class="p">{},</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">counter</span> <span class="p">)</span>
            <span class="p">);</span>
         <span class="p">}</span>

         <span class="k">return</span> <span class="p">{</span> <span class="nx">onDomAvailable</span><span class="o">:</span> <span class="nx">render</span> <span class="p">};</span>
      <span class="p">}</span>
   <span class="p">};</span>
<span class="p">}</span> <span class="p">);</span>
</pre></div>


<h3 id="creating-a-react-control">Creating a React Control</h3>
<p>A LaxarJS control allows you to encapsulates one or more React components with associated CSS styles, that can be overwritten by themes.</p>
<p>React controls are implemented as regular AMD-modules, just like <em>plain</em> controls.
Just make sure to specify <code>"react"</code> as the integration technology in your <code>control.json</code>, and to export all components that you wish to make available to widgets.  </p>
<h3 id="using-jsx">Using JSX</h3>
<p>If you'd like to write your widget- or control-code in JSX, just make sure that the generated .js-file is put in the same place as a handwritten controller, and that AMD-compatible output is generated.
Usually, you can achieve this by using the right editor/tool settings.</p>
<p>Using JSX, the widget controller from above can be simplified:</p>
<div class="codehilite"><pre>import React from &#39;react&#39;;

export default {
   name: &#39;my-counter-widget&#39;,
   injections: [ &#39;axEventBus&#39;, &#39;axReactRender&#39; ],
   create: function( eventBus, reactRender ) {
      var counter = 0;
      const render = () =&gt; reactRender( &lt;h1&gt;#{counter}&lt;/h1&gt; );
      eventBus.subscribe( &#39;takeActionRequest&#39;, () =&gt; {
         ++counter;
         render();
      } );

      return { onDomAvailable: render };
   }
};
</pre></div>


<p>Also, you can delete the <code>default.theme/my-counter-widget.html</code> since for React, we do not use HTML template loading mechanism.</p>
<h3 id="testing-with-laxarjs-mocks">Testing with LaxarJS Mocks</h3>
<p>Starting with <a href="https://github.com/LaxarJS/laxar-mocks">laxar-mocks</a> v0.5.0, you can pass custom adapters when creating the testbed-setup function.
Simply write your specs like this:</p>
<div class="codehilite"><pre><span class="nx">define</span><span class="p">(</span> <span class="p">[</span>
   <span class="s1">&#39;json!../widget.json&#39;</span><span class="p">,</span>
   <span class="s1">&#39;laxar-react-adapter&#39;</span><span class="p">,</span>
   <span class="s1">&#39;laxar-mocks&#39;</span>
<span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">descriptor</span><span class="p">,</span> <span class="nx">axReactAdapter</span><span class="p">,</span> <span class="nx">axMocks</span> <span class="p">)</span> <span class="p">{</span>
   <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

   <span class="nx">describe</span><span class="p">(</span> <span class="s1">&#39;The my-counter-widget&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">beforeEach</span><span class="p">(</span> <span class="nx">axMocks</span><span class="p">.</span><span class="nx">createSetupForWidget</span><span class="p">(</span> <span class="nx">descriptor</span><span class="p">,</span> <span class="p">{</span>
         <span class="c1">// register the adapter:</span>
         <span class="nx">adapter</span><span class="o">:</span> <span class="nx">axReactAdapter</span><span class="p">,</span>
         <span class="c1">// with React JSX, usually we will not use an HTML template:</span>
         <span class="nx">knownMissingResources</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;default.theme/my-counter-widget.html&#39;</span> <span class="p">]</span>
      <span class="p">}</span> <span class="p">)</span> <span class="p">);</span>

      <span class="c1">// ... tests ...</span>

      <span class="nx">afterEach</span><span class="p">(</span> <span class="nx">axMocks</span><span class="p">.</span><span class="nx">tearDown</span> <span class="p">);</span>

   <span class="p">}</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</pre></div></main>
        </div>
      </div>

      <footer>
   <div class="container">
      <div class="ax-copyright">
         <span>
            
         </span>

         <ul class="ax-social">
            
               <li><a class="fa fa-twitter-square" target="_blank" href="https://twitter.com/laxarjs"></a></li>
            
            
               <li><a class="fa fa-rss-square" target="_blank" title="Subscribe to our RSS-feed" href="http://laxarjs.org/rss"></a></li>
            
         </ul>
      </div>
   </div>
</footer>

      <script src="./../laxar.theme/js/jquery-1.10.2.min.js"></script>
      <script src="./../laxar.theme/js/bootstrap-3.0.3.min.js"></script>
      <script src="./../laxar.theme/js/base.js"></script>
   </body>
</html>