<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../laxar.theme/img/favicon.ico">
        <title>laxar-tooling  v0.1.0</title>

        <link rel="stylesheet" href="../../../laxar.theme/css/pygments.css">
        <link href="../../../laxar.theme/css/style.min.css" rel="stylesheet">

    </head>

    <body class="documentation">

      <header class="navbar  navbar-fixed-top" role="navigation">
    <div class="container">

        <div class="navbar-header navbar-inverse">
           <button class="navbar-toggle"
              type="button"
              data-toggle="collapse"
              data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
            <!-- Main title -->
            <a class="navbar-brand" href="http://www.laxarjs.org">
               <span class="ax-laxar-logo">Laxar<span>JS</span></span>
            </a>
         </div>

         <div class="navbar-collapse collapse navbar-inverse">
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         laxar-tooling <span class="caret"></span>
      </a>
         
         <ul class="dropdown-menu">
            
            <li><a href="../../../laxar-latest">laxar</a></li>
            
            <li><a href="../../../laxar-patterns-latest">laxar-patterns</a></li>
            
            <li><a href="../../../laxar-uikit-latest">laxar-uikit</a></li>
            
            <li><a href="../../../laxar-mocks-latest">laxar-mocks</a></li>
            
            <li><a href="../../../laxar-loader-latest">laxar-loader</a></li>
            
            <li><a href="../../../laxar-tooling-latest">laxar-tooling</a></li>
            
            <li><a href="../../../laxar-angular-adapter-latest">laxar-angular-adapter</a></li>
            
            <li><a href="../../../laxar-angular2-adapter-latest">laxar-angular2-adapter</a></li>
            
            <li><a href="../../../laxar-react-adapter-latest">laxar-react-adapter</a></li>
            
            <li><a href="../../../laxar-vue-adapter-latest">laxar-vue-adapter</a></li>
            
            <li><a href="../../../generator-laxarjs-latest">generator-laxarjs</a></li>
            
            <li><a href="../../../generator-laxarjs2-latest">generator-laxarjs2</a></li>
            
            <li><a href="../../../grunt-laxar-latest">grunt-laxar</a></li>
            
         </ul>
         
   </li>
</ul>
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         v0.1.0 <span class="caret"></span>
      </a>
      
      <ul class="dropdown-menu">
         
            <li class="ax-dropdown-headline">Latest</li>
            
               <li><a href="../../../laxar-tooling-v2-latest">v2.0.0</a></li>
            
               <li><a href="../../../laxar-tooling-v0-latest">v0.6.0</a></li>
            
            <li role="separator" class="divider"></li>
         
         <li class="ax-dropdown-headline">All Releases</li>
         
            <li><a href="../../../laxar-tooling-v2.0.0">v2.0.0</a></li>
         
            <li><a href="../../../laxar-tooling-v0.6.0">v0.6.0</a></li>
         
            <li><a href="../../../laxar-tooling-v0.5.0">v0.5.0</a></li>
         
            <li><a href="../../../laxar-tooling-v0.4.1">v0.4.1</a></li>
         
            <li><a href="../../../laxar-tooling-v0.4.0">v0.4.0</a></li>
         
            <li><a href="../../../laxar-tooling-v0.3.1">v0.3.1</a></li>
         
            <li><a href="../../../laxar-tooling-v0.3.0">v0.3.0</a></li>
         
            <li><a href="../../../laxar-tooling-v0.2.0">v0.2.0</a></li>
         
            <li><a href="../../../laxar-tooling-v0.1.0">v0.1.0</a></li>
         
      </ul>
      
   </li>
</ul>

            <ul class="nav navbar-nav">
               
                  
               
                  
               
               
                <!-- Repo link -->
                
                <li>
                    <a class="ax-external" href="https://github.com/LaxarJS/laxar-tooling/tree/v0.1.0">
                       <i class="fa fa-github"></i> GitHub
                    </a>
                </li>
                
            </ul>
            <a class="ax-navbar-additional"
               target="_blank"
               href="http://laxarjs.github.io/widget-browser/#/widgetBrowser">Widgets</a>
        </div>
    </div>
</header>

      <div class="container content">
        <div class="row">
           <sidebar class="col-sm-4 col-xs-12"><div class="bs-sidebar hidden-print" role="complementary">
   <h3>Documentation</h3>
   <ul class="nav bs-sidenav">
   
      
         
            <li class="main"><a title="README" href="../..#start">README</a></li>
         
      
   
      
         <li class="main ax-collapse ax-active" >
            <a class="ax-link"
               href="javascript:void(0)"
               title="API"
               data-toggle="collapse"
               data-target="#API"
               aria-expanded="false"
               aria-controls="collapseExample">API <span class="caret"></span></a>

            <ul class="nav subnav in"
               id="API">
               
               <li class="ax-active">
                  <a title="artifactCollector" href="./#start">artifactCollector</a>
               </li>
               
               <li >
                  <a title="dependencyCollector" href="../dependency_collector.js/#start">dependencyCollector</a>
               </li>
               
               <li >
                  <a title="fileReader" href="../file_reader.js/#start">fileReader</a>
               </li>
               
               <li >
                  <a title="jsonReader" href="../json_reader.js/#start">jsonReader</a>
               </li>
               
               <li >
                  <a title="resourceCollector" href="../resource_collector.js/#start">resourceCollector</a>
               </li>
               
               <li >
                  <a title="stylesheetCollector" href="../stylesheet_collector.js/#start">stylesheetCollector</a>
               </li>
               
            </ul>
         </li>
      
   
    </ul>
</div></sidebar>
           <main class="col-sm-8 col-xs-12 " role="main">

<a name="start" class="ax-anchor"></a>
<h1 id="artifactcollector">artifactCollector</h1>
<p>Determine application artifacts by inspecting flow, pages and widgets.</p>
<h2 id="contents">Contents</h2>
<p><strong>Module Members</strong></p>
<ul>
<li><a href="#create">create</a></li>
<li><a href="#getResourcePaths">getResourcePaths</a></li>
</ul>
<p><strong>Types</strong></p>
<ul>
<li><a href="#ArtifactCollector">ArtifactCollector</a><ul>
<li><a href="#ArtifactCollector#collectArtifacts">ArtifactCollector#collectArtifacts</a></li>
<li><a href="#ArtifactCollector#collectFlows">ArtifactCollector#collectFlows</a></li>
<li><a href="#ArtifactCollector#collectPages">ArtifactCollector#collectPages</a></li>
<li><a href="#ArtifactCollector#collectWidgets">ArtifactCollector#collectWidgets</a></li>
<li><a href="#ArtifactCollector#collectControls">ArtifactCollector#collectControls</a></li>
<li><a href="#ArtifactCollector#collectThemes">ArtifactCollector#collectThemes</a></li>
<li><a href="#ArtifactCollector#collectLayouts">ArtifactCollector#collectLayouts</a></li>
</ul>
</li>
</ul>
<h2 id="module-members">Module Members</h2>
<h4 id="create-log-options"><a name="create"></a>create( log, options )</h4>
<p>Create an artifact collector instance.</p>
<p>Example:</p>
<div class="codehilite"><pre>const collector = laxarTooling.artifactCollector.create( log, {
   readJson: filename =&gt; new Promise( ( resolve, reject ) =&gt; {
      fs.readFile( filename, ( err, contents ) =&gt; {
         try {
            err ? reject( err ) : resolve( JSON.parse( contents ) );
         }
         catch( err ) {
            reject( err );
         }
      } );
   } ),
   projectPath: filename =&gt; path.relative( projectRoot, filename ),
   projectRef: filename =&gt; path.relative( baseUrl, filename )
} );
</pre></div>


<h5 id="parameters">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>log</td>
<td><code>Object</code></td>
<td>a logger instance with at least a <code>log.error()</code> method</td>
</tr>
<tr>
<td>options</td>
<td><code>Object</code></td>
<td>additional options</td>
</tr>
<tr>
<td><em>options.fileContents</em></td>
<td><code>Object</code></td>
<td>an object mapping file paths (as returned by options.projectPath) to promises that resolve to the parsed JSON contents of the file</td>
</tr>
<tr>
<td><em>options.readJson</em></td>
<td><code>Function</code></td>
<td>a function accepting a file path as an argument and returning a promise that resolves to the parsed JSON contents of the file</td>
</tr>
<tr>
<td><em>options.projectPath</em></td>
<td><code>Function</code></td>
<td>a function resolving a given file path to something that can be read by the <code>readJson</code> function and either returning it as a <code>String</code> or asynchronously as a <code>Promise</code></td>
</tr>
<tr>
<td><em>options.projectRef</em></td>
<td><code>Function</code></td>
<td>a function returning a module name or path that can be <code>require()</code>d</td>
</tr>
</tbody>
</table>
<h5 id="returns">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ArtifactCollector</code></td>
<td>the created artifact collector</td>
</tr>
</tbody>
</table>
<h4 id="getresourcepaths-themes-resourcetype"><a name="getResourcePaths"></a>getResourcePaths( themes, resourceType )</h4>
<p>Generate a function that maps artifacts to resource paths (to watch, list or embed),
taking into account the available themes.</p>
<p>Note: when asking for <code>list</code> paths, <code>embed</code> paths will be included (embedding implies listing)!
This spares artifact developers from specifying embedded resources twice.</p>
<h5 id="parameters_1">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>themes</td>
<td><code>Array.&lt;Object&gt;</code></td>
<td>a list of themes, each with a <code>name</code> property (e.g. <code>'default.theme'</code>)</td>
</tr>
<tr>
<td>resourceType</td>
<td><code>string</code></td>
<td>the type of resource</td>
</tr>
</tbody>
</table>
<h5 id="returns_1">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Function.&lt;string, Array.&lt;string&gt;&gt;</code></td>
<td>a function to provide the desired resource paths for the given artifact</td>
</tr>
</tbody>
</table>
<h2 id="types">Types</h2>
<h3 id="artifactcollector_1"><a name="ArtifactCollector"></a>ArtifactCollector</h3>
<h4 id="artifactcollectorcollectartifacts-flowpaths-themerefs"><a name="ArtifactCollector#collectArtifacts"></a>ArtifactCollector#collectArtifacts( flowPaths, themeRefs )</h4>
<p>Obtain artifact information asynchronously, starting from a set of flow definitions.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectArtifacts( [ &#39;path/to/flow.json&#39; ] )
   .then( artifacts =&gt; {
      assert( Array.isArray( artifacts.flows ) );
      assert( Array.isArray( artifacts.themes ) );
      assert( Array.isArray( artifacts.pages ) );
      assert( Array.isArray( artifacts.layouts ) );
      assert( Array.isArray( artifacts.widgets ) );
      assert( Array.isArray( artifacts.controls ) );
   } );
// =&gt; {
//       flows: [ ... ],
//       themes: [ ... ],
//       pages: [ ... ],
//       layouts: [ ... ],
//       widgets: [ ... ],
//       contros: [ ... ]
//    }
</pre></div>


<h5 id="parameters_2">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>flowPaths</td>
<td><code>Array.&lt;String&gt;</code></td>
<td>a list of flows to follow to find all the pages reachable form the flow and their required artifacts</td>
</tr>
<tr>
<td>themeRefs</td>
<td><code>Array.&lt;String&gt;</code></td>
<td>a list of themes to include in the artifacts</td>
</tr>
</tbody>
</table>
<h5 id="returns_2">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Object&gt;</code></td>
<td>the artifact listing with the keys <code>flows</code>, <code>themes</code>, <code>pages</code>, <code>layouts</code>, <code>widgets</code> and <code>controls</code>, of which each is an array of artifact objects</td>
</tr>
</tbody>
</table>
<h4 id="artifactcollectorcollectflows-flowpaths"><a name="ArtifactCollector#collectFlows"></a>ArtifactCollector#collectFlows( flowPaths )</h4>
<p>Asynchronously collect all flows corresponding to the given paths.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectFlows( [ &#39;path/to/flow.json&#39; ] )
   .then( flows =&gt; {
      assert( Array.isArray( flows ) );
   } );
// =&gt; [ {
//       path: &#39;path/to/flow.json&#39;,
//       resources: {
//          watch: [ &#39;.&#39; ],
//          embed: [ &#39;.&#39; ],
//          list: []
//       },
//       references: {
//          local: { self: &#39;path/to/flow.json&#39; }
//       }
//    } ]
</pre></div>


<h5 id="parameters_3">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>flowPaths</td>
<td><code>Array.&lt;String&gt;</code></td>
<td>a list of flow paths</td>
</tr>
</tbody>
</table>
<h5 id="returns_3">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Array&gt;</code></td>
<td>a promise for an array of flow-meta objects</td>
</tr>
</tbody>
</table>
<h4 id="artifactcollectorcollectpages-flows"><a name="ArtifactCollector#collectPages"></a>ArtifactCollector#collectPages( flows )</h4>
<p>Asynchronously collect all pages that are reachable from the given list of flows.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectPages( flows )
   .then( pages =&gt; {
      assert( Array.isArray( pages ) );
   } );
// =&gt; [ {
//       path: &#39;path/to/page.json&#39;,
//       resources: { ... },
//       references: {
//          local: { self: &#39;ref/of/page&#39; }
//       },
//       pages: [ ... ],
//       layouts: [ ... ],
//       widgets: [ ... ],
//    }, ... ]
</pre></div>


<h5 id="parameters_4">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>flows</td>
<td><code>Array.&lt;String&gt;</code></td>
<td>a list of flow artifacts as returned by <a href="#ArtifactCollector#collectFlows">ArtifactCollector#collectFlows</a></td>
</tr>
</tbody>
</table>
<h5 id="returns_4">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Array&gt;</code></td>
<td>a promise for a combined array of page meta information for these flows</td>
</tr>
</tbody>
</table>
<h4 id="artifactcollectorcollectwidgets-pages-themes"><a name="ArtifactCollector#collectWidgets"></a>ArtifactCollector#collectWidgets( pages, themes )</h4>
<p>Collect meta information on all widget that are referenced from the given pages.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectWidgets( pages, themes )
   .then( widgets =&gt; {
      assert( Array.isArray( widgets ) );
   } );
// =&gt; [ {
//       path: &#39;path/to/widget&#39;,
//       resources: { ... },
//       references: {
//          local: { self: &#39;ref/of/widget&#39; },
//          amd: { self: &#39;ref/of/widget&#39;, module: &#39;ref/of/widget/widget&#39; }
//       },
//       integration: {
//          type: &#39;...&#39;,
//          technology: &#39;...&#39;
//       },
//       controls: [ ... ]
//    }, ... ]
</pre></div>


<h5 id="parameters_5">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pages</td>
<td><code>Array</code></td>
<td>a list of page artifacts as returned by <a href="#ArtifactCollector#collectPages">ArtifactCollector#collectPages</a></td>
</tr>
<tr>
<td>themes</td>
<td><code>Array</code></td>
<td>a list of theme artifacts as returned by <a href="#ArtifactCollector#collectThemes">ArtifactCollector#collectThemes</a></td>
</tr>
</tbody>
</table>
<h5 id="returns_5">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Array&gt;</code></td>
<td>a promise for an array of meta-information about all reachable widgets</td>
</tr>
</tbody>
</table>
<h4 id="artifactcollectorcollectcontrols-widgets-themes"><a name="ArtifactCollector#collectControls"></a>ArtifactCollector#collectControls( widgets, themes )</h4>
<p>Collect meta information on all controls that are referenced by the given widgets.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectControls( widgets, themes )
   .then( controls =&gt; {
      assert( Array.isArray( controls ) );
   } );
// =&gt; [ {
//       path: &#39;path/to/control&#39;,
//       resources: { ... },
//       references: {
//          local: { self: &#39;ref/of/control&#39; },
//          amd: { self: &#39;ref/of/control&#39;, module: &#39;ref/of/control/control&#39; }
//       },
//       integration: {
//          type: &#39;...&#39;,
//          technology: &#39;...&#39;
//       }
//    }, ... ]
</pre></div>


<h5 id="parameters_6">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>widgets</td>
<td><code>Array</code></td>
<td>a list of widget artifacts as returned by <a href="#ArtifactCollector#collectWidgets">ArtifactCollector#collectWidgets</a></td>
</tr>
<tr>
<td>themes</td>
<td><code>Array</code></td>
<td>a list of theme artifacts as returned by <a href="#ArtifactCollector#collectThemes">ArtifactCollector#collectThemes</a></td>
</tr>
</tbody>
</table>
<h5 id="returns_6">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Array&gt;</code></td>
<td>a promise for an array of meta-information about all reachable controls</td>
</tr>
</tbody>
</table>
<h4 id="artifactcollectorcollectthemes-themerefs"><a name="ArtifactCollector#collectThemes"></a>ArtifactCollector#collectThemes( themeRefs )</h4>
<p>Collect meta information on the given themes.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectThemes( themeRefs )
   .then( themes =&gt; {
      assert( Array.isArray( themes ) );
   } );
// =&gt; [ {
//       path: &#39;path/to/my.theme&#39;,
//       name: &#39;my.theme&#39;,
//       resources: { ... },
//       references: { ... }
//    }, {
//       path: &#39;path/to/laxar-uikit/themes/default.theme&#39;,
//       name: &#39;default.theme&#39;,
//       resources: { ... },
//       references: { ... }
//    } ]
</pre></div>


<h5 id="parameters_7">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>themeRefs</td>
<td><code>Array.&lt;String&gt;</code></td>
<td>a list of themes to include in the artifacts</td>
</tr>
</tbody>
</table>
<h5 id="returns_7">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Array&gt;</code></td>
<td>a promise for an array of meta-information about all themes</td>
</tr>
</tbody>
</table>
<h4 id="artifactcollectorcollectlayouts-pages-themes"><a name="ArtifactCollector#collectLayouts"></a>ArtifactCollector#collectLayouts( pages, themes )</h4>
<p>Finds layouts based on them being referenced in page areas.</p>
<p>Example:</p>
<div class="codehilite"><pre>collector.collectLayouts( pages, themes )
   .then( layouts =&gt; {
      assert( Array.isArray( layouts ) );
   } );
// =&gt; [ {
//       resources: { ... },
//       references: {
//          local: { self: &#39;ref/of/layout&#39; }
//       }
//    }, ... ]
</pre></div>


<h5 id="parameters_8">Parameters</h5>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pages</td>
<td><code>Array</code></td>
<td>a list of page artifacts as returned by <a href="#ArtifactCollector#collectPages">ArtifactCollector#collectPages</a></td>
</tr>
<tr>
<td>themes</td>
<td><code>Array</code></td>
<td>a list of theme artifacts as returned by <a href="#ArtifactCollector#collectThemes">ArtifactCollector#collectThemes</a></td>
</tr>
</tbody>
</table>
<h5 id="returns_8">Returns</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.&lt;Array&gt;</code></td>
<td>a promise for an array of meta-information about all layouts</td>
</tr>
</tbody>
</table></main>
        </div>
      </div>

      <footer>
   <div class="container">
      <div class="ax-copyright">
         <span>
            
         </span>

         <ul class="ax-social">
            
               <li><a class="fa fa-twitter-square" target="_blank" href="https://twitter.com/laxarjs"></a></li>
            
            
               <li><a class="fa fa-rss-square" target="_blank" title="Subscribe to our RSS-feed" href="http://laxarjs.org/rss"></a></li>
            
         </ul>
      </div>
   </div>
</footer>

      <script src="../../../laxar.theme/js/jquery-1.10.2.min.js"></script>
      <script src="../../../laxar.theme/js/bootstrap-3.0.3.min.js"></script>
      <script src="../../../laxar.theme/js/base.js"></script>
   </body>
</html>