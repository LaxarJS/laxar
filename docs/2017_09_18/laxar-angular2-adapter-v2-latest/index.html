<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="./../laxar.theme/img/favicon.ico">
        <title>LaxarJS Angular 2 Adapter v2.0.1</title>

        <link rel="stylesheet" href="./../laxar.theme/css/pygments.css">
        <link href="./../laxar.theme/css/style.min.css" rel="stylesheet">

    </head>

    <body class="documentation">

      <header class="navbar  navbar-fixed-top" role="navigation">
    <div class="container">

        <div class="navbar-header navbar-inverse">
           <button class="navbar-toggle"
              type="button"
              data-toggle="collapse"
              data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
            <!-- Main title -->
            <a class="navbar-brand" href="http://www.laxarjs.org">
               <span class="ax-laxar-logo">Laxar<span>JS</span></span>
            </a>
         </div>

         <div class="navbar-collapse collapse navbar-inverse">
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         laxar-angular2-adapter <span class="caret"></span>
      </a>
         
         <ul class="dropdown-menu">
            
            <li><a href="./../laxar-latest">laxar</a></li>
            
            <li><a href="./../laxar-patterns-latest">laxar-patterns</a></li>
            
            <li><a href="./../laxar-uikit-latest">laxar-uikit</a></li>
            
            <li><a href="./../laxar-mocks-latest">laxar-mocks</a></li>
            
            <li><a href="./../laxar-loader-latest">laxar-loader</a></li>
            
            <li><a href="./../laxar-tooling-latest">laxar-tooling</a></li>
            
            <li><a href="./../laxar-angular-adapter-latest">laxar-angular-adapter</a></li>
            
            <li><a href="./../laxar-angular2-adapter-latest">laxar-angular2-adapter</a></li>
            
            <li><a href="./../laxar-react-adapter-latest">laxar-react-adapter</a></li>
            
            <li><a href="./../laxar-vue-adapter-latest">laxar-vue-adapter</a></li>
            
            <li><a href="./../generator-laxarjs-latest">generator-laxarjs</a></li>
            
            <li><a href="./../generator-laxarjs2-latest">generator-laxarjs2</a></li>
            
            <li><a href="./../grunt-laxar-latest">grunt-laxar</a></li>
            
         </ul>
         
   </li>
</ul>
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         v2.0.1 <span class="caret"></span>
      </a>
      
      <ul class="dropdown-menu">
         
            <li class="ax-dropdown-headline">Latest</li>
            
               <li><a href="./../laxar-angular2-adapter-v2-latest">v2.0.1</a></li>
            
            <li role="separator" class="divider"></li>
         
         <li class="ax-dropdown-headline">All Releases</li>
         
            <li><a href="./../laxar-angular2-adapter-v2.0.1">v2.0.1</a></li>
         
            <li><a href="./../laxar-angular2-adapter-v2.0.0">v2.0.0</a></li>
         
      </ul>
      
   </li>
</ul>

            <ul class="nav navbar-nav">
               
                  
               
                  
                     <li >
                        <a href="CHANGELOG/">Changelog</a>
                     </li>
                  
               
               
                <!-- Repo link -->
                
                <li>
                    <a class="ax-external" href="https://github.com/LaxarJS/laxar-angular2-adapter/tree/v2.0.1">
                       <i class="fa fa-github"></i> GitHub
                    </a>
                </li>
                
            </ul>
            <a class="ax-navbar-additional"
               target="_blank"
               href="http://laxarjs.github.io/widget-browser/#/widgetBrowser">Widgets</a>
        </div>
    </div>
</header>

      <div class="container content">
        <div class="row">
           <sidebar class="col-sm-4 col-xs-12"><div class="bs-sidebar hidden-print" role="complementary">
   <h3>Documentation</h3>
   <ul class="nav bs-sidenav">
   
      
         
            <li class="main ax-active"><a title="README" href=".#start">README</a></li>
         
      
   
      
         
         
      
   
    </ul>
</div></sidebar>
           <main class="col-sm-8 col-xs-12 " role="main">

<a name="start" class="ax-anchor"></a>
<h1 id="laxarjs-angular-2-adapter">LaxarJS Angular 2 Adapter</h1>
<blockquote>
<p>Write LaxarJS widgets and controls using Angular 2</p>
</blockquote>
<p>This technology adapter integrates widgets and controls created using Angular 2 into <a href="https://laxarjs.org">LaxarJS</a> applications, by implementing the integration technology <code>"angular2"</code> (skip to the end for a short discussion of the technology identifier).</p>
<h2 id="installation">Installation</h2>
<p>Note: These instructions only work for LaxarJS v2.</p>
<div class="codehilite"><pre>npm install --save laxar-angular2-adapter
</pre></div>


<p>This will automatically install Angular 2 and all necessary peer dependencies (libraries and shims).
Load the Angular adapter module (<code>laxar-angular2-adapter</code>) into your project and pass it to <code>laxar.create</code>:</p>
<div class="codehilite"><pre><span class="kr">import</span> <span class="p">{</span> <span class="nx">create</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;laxar&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">angular2Adapter</span> <span class="nx">from</span> <span class="s1">&#39;laxar-angular2-adapter&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">artifacts</span> <span class="nx">from</span> <span class="s1">&#39;laxar-loader/artifacts?flow=main&amp;theme=default&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">configuration</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">};</span>
<span class="nx">create</span><span class="p">(</span> <span class="p">[</span> <span class="nx">angular2Adapter</span> <span class="cm">/* , ... */</span> <span class="p">],</span> <span class="nx">artifacts</span><span class="p">,</span> <span class="nx">configuration</span> <span class="p">)</span>
   <span class="p">.</span><span class="nx">flow</span><span class="p">(</span> <span class="cm">/* ... name, element ... */</span> <span class="p">)</span>
   <span class="p">.</span><span class="nx">bootstrap</span><span class="p">();</span>
</pre></div>


<p>The Angular 2 adapter is not available as pre-built version, which means that Typescript support will need to be added to your project.
Since <code>"angular2"</code> widgets most probably will need a Typescript compiler anyways, additional setup steps are necessary.
First of all you'll need a <code>tsconfig.json</code> in your project that configures the Typescript compiler.
Below is a basic version we used to implement this adapter, but feel free to change settings if you are more comfortable with Typescript and its compiler options.</p>
<div class="codehilite"><pre><span class="p">{</span>
   <span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;es5&quot;</span><span class="p">,</span>
      <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;commonjs&quot;</span><span class="p">,</span>
      <span class="nt">&quot;moduleResolution&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sourceMap&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;emitDecoratorMetadata&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;experimentalDecorators&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;lib&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;es2015&quot;</span><span class="p">,</span> <span class="s2">&quot;dom&quot;</span> <span class="p">],</span>
      <span class="nt">&quot;noImplicitAny&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;suppressImplicitAnyIndexErrors&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;baseUrl&quot;</span><span class="p">:</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span>
      <span class="nt">&quot;typeRoots&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="s2">&quot;./node_modules/@types/&quot;</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="nt">&quot;compileOnSave&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
   <span class="nt">&quot;exclude&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;**/bower_components/*&quot;</span><span class="p">,</span>
      <span class="s2">&quot;**/node_modules/*&quot;</span><span class="p">,</span>
      <span class="s2">&quot;**/*-aot.ts&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>Then you need to add webpack support for Typescript.
This means you'll need the actual compiler as well as a Typescript loader for webpack.
There some different flavors of compilers and loaders for Typescript available, but we chose to go with the common ones.
Add these to your project:</p>
<div class="codehilite"><pre><span class="go">npm install --save-dev typescript ts-loader</span>
</pre></div>


<p>Finally include support for Typescript in your <code>webpack.config.js</code>.
Below is a very simple example, showing only the modified parts:</p>
<div class="codehilite"><pre><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>

   <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// Here we add support for Typescript file extensions</span>
      <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.jsx&#39;</span><span class="p">,</span> <span class="s1">&#39;.ts&#39;</span><span class="p">,</span> <span class="s1">&#39;.tsx&#39;</span> <span class="p">],</span>
   <span class="p">},</span>

   <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
         <span class="c1">// And here we add the loader rule for these extensions</span>
         <span class="p">{</span>
            <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.tsx?$/</span><span class="p">,</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;ts-loader&#39;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">};</span>
</pre></div>


<p>That's it.</p>
<h2 id="usage">Usage</h2>
<p>With the adapter in place, you can now write widgets and controls using Angular 2.
The <a href="https://laxarjs.org/docs/generator-laxarjs2-v2-latest/">LaxarJS Yeoman generator</a> can create simple widgets and controls for the integration technology <em>"angular2"</em>.</p>
<h2 id="creating-an-angular-2-widget">Creating an Angular 2 Widget</h2>
<p>You can use the LaxarJS generator for Yeoman to create an <em>Angular 2</em> widget by selecting <em>"angular2"</em> as <em>integration technology</em>.
The new widget has a <code>.ts</code> file with a simple widget component and a module declaring that component.</p>
<p>This will basically look like this (assuming the widget was named <code>example-widget</code>):</p>
<div class="codehilite"><pre>import { Component, NgModule } from &#39;@angular/core&#39;;

@Component( {
   templateUrl: &#39;ax-widget:template:example-widget&#39;
} )
export class ExampleWidget {

   constructor() {

   }

}

@NgModule( {
   declarations: [ ExampleWidget ]
} )
export class ExampleWidgetModule {}
</pre></div>


<p>The most basic LaxarJS widget using Angular 2 as technology is a standard Angular component, that belongs to a module declaring the component.
The only important thing is the naming of the module and the component, as the adapter will reference them under these names.</p>
<p>Additionally there is one thing that's completely specific to LaxarJS in this basic setup:
The <code>templateUrl</code> property of the component does not directly point to a real file, but rather is an identifier for which template file to load by the LaxarJS Angular 2 adapter.
This string will be automatically generated for you when using the yeoman generator and in general should never be changed.
If this template url is present, the HTML file under the correct theme folder will be loaded for the widget instance, just as it is the case for any other widget technology.
Feel free to provide a "real" path here or even use an embedded template string, if you don't want to use this mechanism.</p>
<h3 id="creating-and-using-an-angular-2-control">Creating and using an Angular 2 Control</h3>
<p>Control support for Angular 2 in LaxarJS is limited to loading the correctly themed stylesheet of the control for you.
To be able to use a control (an Angular module and all assets defined for that module) in a widget, you need to import its implementation in the widget and add the corresponding dependencies to the Angular module definition of the widget.
For simplicity, we recommend to define and export a module from your control source file and add that as an import to your widget module.</p>
<p>So let's assume the following exemplary control, only defining a directive that modifies the text color of element it is used on:</p>
<div class="codehilite"><pre>import { Directive, ElementRef, NgModule } from &#39;@angular/core&#39;;

@Directive( {
   selector: &#39;[veryImportant]&#39;
} )
class VeryImportant {
   constructor( element: ElementRef ) {
      element.nativeElement.style.color = &#39;red&#39;;
   }
}

@NgModule( {
   declarations: [ VeryImportant ],
   exports: [ VeryImportant ]
} )
export class VeryImportantControlModule {}
</pre></div>


<p>The widget that wants to use this control just needs to import the ES module and import the Angular 2 module:</p>
<div class="codehilite"><pre>import { VeryImportantControlModule } from &#39;very-important-control&#39;;

// ...

@NgModule( {
   imports: [ VeryImportantControlModule ],
   declarations: [ ExampleWidget ]
} )
export class ExampleWidgetModule {}
</pre></div>


<p>Within its template the directive defined by the control can now be used just as any other Angular 2 directive:</p>
<div class="codehilite"><pre><span class="nt">&lt;h1</span> <span class="na">veryImportant</span><span class="nt">&gt;</span>This is a very important information!<span class="nt">&lt;/h1&gt;</span>
</pre></div>


<h3 id="testing-with-laxarjs-mocks">Testing with LaxarJS Mocks</h3>
<p>Mostly, testing with LaxarJS Mocks works just as for any other technology.
The only thing that needs to be loaded are testing shims for <em>zone.js</em> and some new JavaScript APIs (see <a href="#browser-support">Browser Support</a>)
These shims are already composed in <code>test-support.ts</code> in the angular2 adapter.
So a basic setup would look like this:</p>
<div class="codehilite"><pre><span class="kr">import</span> <span class="s1">&#39;laxar-angular2-adapter/test-support&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="o">*</span> <span class="nx">as</span> <span class="nx">axMocks</span> <span class="nx">from</span> <span class="s1">&#39;laxar-mocks&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span> <span class="s1">&#39;An ng2-test-widget&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>

   <span class="kd">let</span> <span class="nx">widgetDom</span><span class="p">;</span>

   <span class="nx">beforeEach</span><span class="p">(</span> <span class="nx">axMocks</span><span class="p">.</span><span class="nx">setupForWidget</span><span class="p">()</span> <span class="p">);</span>

   <span class="nx">beforeEach</span><span class="p">(</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">axMocks</span><span class="p">.</span><span class="nx">widget</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span> <span class="p">{</span>
         <span class="c1">// Features configuration of the widget</span>
      <span class="p">}</span> <span class="p">);</span>
   <span class="p">}</span> <span class="p">);</span>
   <span class="nx">beforeEach</span><span class="p">(</span> <span class="nx">axMocks</span><span class="p">.</span><span class="nx">widget</span><span class="p">.</span><span class="nx">load</span> <span class="p">);</span>
   <span class="nx">beforeEach</span><span class="p">(</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">widgetDom</span> <span class="o">=</span> <span class="nx">axMocks</span><span class="p">.</span><span class="nx">widget</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
   <span class="p">}</span> <span class="p">);</span>

   <span class="nx">afterEach</span><span class="p">(</span> <span class="nx">axMocks</span><span class="p">.</span><span class="nx">tearDown</span> <span class="p">);</span>

   <span class="nx">it</span><span class="p">(</span> <span class="s1">&#39;does something useful&#39;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="c1">// your tests here</span>
   <span class="p">}</span>

<span class="p">}</span> <span class="p">);</span>
</pre></div>


<h2 id="browser-support">Browser Support</h2>
<p>Angular 2 makes heavy use of bleeding edge browser features that are no standard yet or are just being implemented in browsers.
This may make it necessary to include some shims.
For example Internet Explorer 10 will need the <code>core-js</code> shim in the application.
Add the dependency to your project (we tested with version 2.4.1) and include it at the top of your projects main file (by default this is the file <code>init.js</code>):</p>
<div class="codehilite"><pre><span class="kr">import</span> <span class="s1">&#39;core-js/client/shim.min.js&#39;</span><span class="p">;</span>
</pre></div>


<p>For widget specs, the <code>test-support.ts</code> file of the adapter already includes this shim.</p>
<h2 id="why-the-technology-identifier-angular2-and-not-angular-or-angularx-or-whatever">Why the technology identifier <code>angular2</code> (and not <code>angular</code> or <code>angularx</code> or whatever)?</h2>
<p>One goal of LaxarJS is to give developers the choice of the framework or library used for the rendering part of a widget.
Starting from AngularJS 1, LaxarJS now supports many more technologies like Vue.js or React.
With the announcement of Angular 2 we very early decided to try to support this new version alongside of the former Angular 1.x releases.</p>
<p>So how should we name this technology when referenced in the widget descriptor file?
If we would have chosen <code>angular</code>, than the installed version of the adapter would have made the difference of the supported version.
Major changes in the adapter API would have not been possible since the major version number would have been tied to the major version of AngularJS.
Additionally only one version of Angular could be used at a time.
So this would be no option.</p>
<p>Building the support for both versions into one adapter under one version (if at all possible) would have lead to very unmaintainable code and bloated applications.
Since the current AngularJS version is widely known as Angular 2 and was developed under that name, we just decided to go with <code>angular2</code>.</p></main>
        </div>
      </div>

      <footer>
   <div class="container">
      <div class="ax-copyright">
         <span>
            
         </span>

         <ul class="ax-social">
            
               <li><a class="fa fa-twitter-square" target="_blank" href="https://twitter.com/laxarjs"></a></li>
            
            
               <li><a class="fa fa-rss-square" target="_blank" title="Subscribe to our RSS-feed" href="http://laxarjs.org/rss"></a></li>
            
         </ul>
      </div>
   </div>
</footer>

      <script src="./../laxar.theme/js/jquery-1.10.2.min.js"></script>
      <script src="./../laxar.theme/js/bootstrap-3.0.3.min.js"></script>
      <script src="./../laxar.theme/js/base.js"></script>
   </body>
</html>