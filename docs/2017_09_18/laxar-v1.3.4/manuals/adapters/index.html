<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../laxar.theme/img/favicon.ico">
        <title>LaxarJS  v1.3.4</title>

        <link rel="stylesheet" href="../../../laxar.theme/css/pygments.css">
        <link href="../../../laxar.theme/css/style.min.css" rel="stylesheet">

    </head>

    <body class="documentation">

      <header class="navbar  navbar-fixed-top" role="navigation">
    <div class="container">

        <div class="navbar-header navbar-inverse">
           <button class="navbar-toggle"
              type="button"
              data-toggle="collapse"
              data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
            <!-- Main title -->
            <a class="navbar-brand" href="http://www.laxarjs.org">
               <span class="ax-laxar-logo">Laxar<span>JS</span></span>
            </a>
         </div>

         <div class="navbar-collapse collapse navbar-inverse">
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         laxar <span class="caret"></span>
      </a>
         
         <ul class="dropdown-menu">
            
            <li><a href="../../../laxar-latest">laxar</a></li>
            
            <li><a href="../../../laxar-patterns-latest">laxar-patterns</a></li>
            
            <li><a href="../../../laxar-uikit-latest">laxar-uikit</a></li>
            
            <li><a href="../../../laxar-mocks-latest">laxar-mocks</a></li>
            
            <li><a href="../../../laxar-loader-latest">laxar-loader</a></li>
            
            <li><a href="../../../laxar-tooling-latest">laxar-tooling</a></li>
            
            <li><a href="../../../laxar-angular-adapter-latest">laxar-angular-adapter</a></li>
            
            <li><a href="../../../laxar-angular2-adapter-latest">laxar-angular2-adapter</a></li>
            
            <li><a href="../../../laxar-react-adapter-latest">laxar-react-adapter</a></li>
            
            <li><a href="../../../laxar-vue-adapter-latest">laxar-vue-adapter</a></li>
            
            <li><a href="../../../generator-laxarjs-latest">generator-laxarjs</a></li>
            
            <li><a href="../../../generator-laxarjs2-latest">generator-laxarjs2</a></li>
            
            <li><a href="../../../grunt-laxar-latest">grunt-laxar</a></li>
            
         </ul>
         
   </li>
</ul>
            <ul class="nav navbar-nav nav-pills ax-dropdown">
   <li role="presentation" class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
         v1.3.4 <span class="caret"></span>
      </a>
      
      <ul class="dropdown-menu">
         
            <li class="ax-dropdown-headline">Latest</li>
            
               <li><a href="../../../laxar-v2-latest">v2.0.0</a></li>
            
               <li><a href="../../../laxar-v1-latest">v1.3.5</a></li>
            
               <li><a href="../../../laxar-v0-latest">v0.26.2</a></li>
            
            <li role="separator" class="divider"></li>
         
         <li class="ax-dropdown-headline">All Releases</li>
         
            <li><a href="../../../laxar-v2.0.0">v2.0.0</a></li>
         
            <li><a href="../../../laxar-v1.3.5">v1.3.5</a></li>
         
            <li><a href="../../../laxar-v1.3.4">v1.3.4</a></li>
         
            <li><a href="../../../laxar-v1.3.3">v1.3.3</a></li>
         
            <li><a href="../../../laxar-v1.3.2">v1.3.2</a></li>
         
            <li><a href="../../../laxar-v1.3.1">v1.3.1</a></li>
         
            <li><a href="../../../laxar-v1.3.0">v1.3.0</a></li>
         
            <li><a href="../../../laxar-v1.2.10">v1.2.10</a></li>
         
            <li><a href="../../../laxar-v1.2.9">v1.2.9</a></li>
         
            <li><a href="../../../laxar-v1.2.8">v1.2.8</a></li>
         
            <li><a href="../../../laxar-v1.2.7">v1.2.7</a></li>
         
            <li><a href="../../../laxar-v1.2.6">v1.2.6</a></li>
         
            <li><a href="../../../laxar-v1.2.5">v1.2.5</a></li>
         
            <li><a href="../../../laxar-v1.2.4">v1.2.4</a></li>
         
            <li><a href="../../../laxar-v1.2.3">v1.2.3</a></li>
         
            <li><a href="../../../laxar-v1.2.2">v1.2.2</a></li>
         
            <li><a href="../../../laxar-v1.2.1">v1.2.1</a></li>
         
            <li><a href="../../../laxar-v1.2.0">v1.2.0</a></li>
         
            <li><a href="../../../laxar-v1.1.0">v1.1.0</a></li>
         
            <li><a href="../../../laxar-v1.0.5">v1.0.5</a></li>
         
            <li><a href="../../../laxar-v1.0.4">v1.0.4</a></li>
         
            <li><a href="../../../laxar-v1.0.3">v1.0.3</a></li>
         
            <li><a href="../../../laxar-v1.0.2">v1.0.2</a></li>
         
            <li><a href="../../../laxar-v1.0.1">v1.0.1</a></li>
         
            <li><a href="../../../laxar-v1.0.0">v1.0.0</a></li>
         
            <li><a href="../../../laxar-v0.26.2">v0.26.2</a></li>
         
            <li><a href="../../../laxar-v0.26.1">v0.26.1</a></li>
         
            <li><a href="../../../laxar-v0.26.0">v0.26.0</a></li>
         
            <li><a href="../../../laxar-v0.25.1">v0.25.1</a></li>
         
            <li><a href="../../../laxar-v0.25.0">v0.25.0</a></li>
         
            <li><a href="../../../laxar-v0.24.0">v0.24.0</a></li>
         
            <li><a href="../../../laxar-v0.23.3">v0.23.3</a></li>
         
            <li><a href="../../../laxar-v0.23.2">v0.23.2</a></li>
         
            <li><a href="../../../laxar-v0.23.1">v0.23.1</a></li>
         
            <li><a href="../../../laxar-v0.23.0">v0.23.0</a></li>
         
            <li><a href="../../../laxar-v0.22.2">v0.22.2</a></li>
         
            <li><a href="../../../laxar-v0.22.1">v0.22.1</a></li>
         
            <li><a href="../../../laxar-v0.22.0">v0.22.0</a></li>
         
            <li><a href="../../../laxar-v0.21.0">v0.21.0</a></li>
         
            <li><a href="../../../laxar-v0.20.1">v0.20.1</a></li>
         
            <li><a href="../../../laxar-v0.20.0">v0.20.0</a></li>
         
            <li><a href="../../../laxar-v0.19.1">v0.19.1</a></li>
         
            <li><a href="../../../laxar-v0.19.0">v0.19.0</a></li>
         
            <li><a href="../../../laxar-v0.18.2">v0.18.2</a></li>
         
            <li><a href="../../../laxar-v0.18.1">v0.18.1</a></li>
         
            <li><a href="../../../laxar-v0.18.0">v0.18.0</a></li>
         
            <li><a href="../../../laxar-v0.17.1">v0.17.1</a></li>
         
            <li><a href="../../../laxar-v0.17.0">v0.17.0</a></li>
         
            <li><a href="../../../laxar-v0.16.2">v0.16.2</a></li>
         
            <li><a href="../../../laxar-v0.16.1">v0.16.1</a></li>
         
            <li><a href="../../../laxar-v0.16.0">v0.16.0</a></li>
         
            <li><a href="../../../laxar-v0.15.0">v0.15.0</a></li>
         
            <li><a href="../../../laxar-v0.14.0">v0.14.0</a></li>
         
            <li><a href="../../../laxar-v0.13.3">v0.13.3</a></li>
         
            <li><a href="../../../laxar-v0.13.2">v0.13.2</a></li>
         
            <li><a href="../../../laxar-v0.13.1">v0.13.1</a></li>
         
            <li><a href="../../../laxar-v0.13.0">v0.13.0</a></li>
         
            <li><a href="../../../laxar-v0.12.1">v0.12.1</a></li>
         
            <li><a href="../../../laxar-v0.12.0">v0.12.0</a></li>
         
            <li><a href="../../../laxar-v0.11.1">v0.11.1</a></li>
         
            <li><a href="../../../laxar-v0.11.0">v0.11.0</a></li>
         
            <li><a href="../../../laxar-v0.10.1">v0.10.1</a></li>
         
            <li><a href="../../../laxar-v0.10.0">v0.10.0</a></li>
         
            <li><a href="../../../laxar-v0.9.11">v0.9.11</a></li>
         
            <li><a href="../../../laxar-v0.9.10">v0.9.10</a></li>
         
            <li><a href="../../../laxar-v0.9.9">v0.9.9</a></li>
         
            <li><a href="../../../laxar-v0.9.8">v0.9.8</a></li>
         
            <li><a href="../../../laxar-v0.9.7">v0.9.7</a></li>
         
            <li><a href="../../../laxar-v0.9.6">v0.9.6</a></li>
         
            <li><a href="../../../laxar-v0.9.5">v0.9.5</a></li>
         
            <li><a href="../../../laxar-v0.9.4">v0.9.4</a></li>
         
            <li><a href="../../../laxar-v0.9.3">v0.9.3</a></li>
         
            <li><a href="../../../laxar-v0.9.2">v0.9.2</a></li>
         
            <li><a href="../../../laxar-v0.9.1">v0.9.1</a></li>
         
            <li><a href="../../../laxar-v0.9.0">v0.9.0</a></li>
         
      </ul>
      
   </li>
</ul>

            <ul class="nav navbar-nav">
               
                  
               
                  
                     <li >
                        <a href="../../CHANGELOG/">Changelog</a>
                     </li>
                  
               
                  
               
                  
               
                  
               
                  
               
                  
               
               
                <!-- Repo link -->
                
                <li>
                    <a class="ax-external" href="https://github.com/LaxarJS/laxar/tree/v1.3.4">
                       <i class="fa fa-github"></i> GitHub
                    </a>
                </li>
                
            </ul>
            <a class="ax-navbar-additional"
               target="_blank"
               href="http://laxarjs.github.io/widget-browser/#/widgetBrowser">Widgets</a>
        </div>
    </div>
</header>

      <div class="container content">
        <div class="row">
           <sidebar class="col-sm-4 col-xs-12"><div class="bs-sidebar hidden-print" role="complementary">
   <h3>Documentation</h3>
   <ul class="nav bs-sidenav">
   
      
         
            <li class="main"><a title="README" href="../..#start">README</a></li>
         
      
   
      
         
         
      
   
      
         
            <li class="main"><a title="LaxarJS Concepts" href="../../concepts/#start">LaxarJS Concepts</a></li>
         
      
   
      
         
            <li class="main"><a title="Why LaxarJS?" href="../../why_laxar/#start">Why LaxarJS?</a></li>
         
      
   
      
         <li class="main ax-collapse " >
            <a class="ax-link"
               href="javascript:void(0)"
               title="API"
               data-toggle="collapse"
               data-target="#API"
               aria-expanded="false"
               aria-controls="collapseExample">API <span class="caret"></span></a>

            <ul class="nav subnav collapse"
               id="API">
               
               <li >
                  <a title="assert" href="../../api/assert.js/#start">assert</a>
               </li>
               
               <li >
                  <a title="axId" href="../../api/id.js/#start">axId</a>
               </li>
               
               <li >
                  <a title="axLayout" href="../../api/layout.js/#start">axLayout</a>
               </li>
               
               <li >
                  <a title="axRuntimeServices" href="../../api/runtime_services.js/#start">axRuntimeServices</a>
               </li>
               
               <li >
                  <a title="axWidgetArea" href="../../api/widget_area.js/#start">axWidgetArea</a>
               </li>
               
               <li >
                  <a title="configuration" href="../../api/configuration.js/#start">configuration</a>
               </li>
               
               <li >
                  <a title="controls_service" href="../../api/controls_service.js/#start">controls_service</a>
               </li>
               
               <li >
                  <a title="event_bus" href="../../api/event_bus.js/#start">event_bus</a>
               </li>
               
               <li >
                  <a title="file_resource_provider" href="../../api/file_resource_provider.js/#start">file_resource_provider</a>
               </li>
               
               <li >
                  <a title="flow" href="../../api/flow.js/#start">flow</a>
               </li>
               
               <li >
                  <a title="fn" href="../../api/fn.js/#start">fn</a>
               </li>
               
               <li >
                  <a title="i18n" href="../../api/i18n.js/#start">i18n</a>
               </li>
               
               <li >
                  <a title="log" href="../../api/log.js/#start">log</a>
               </li>
               
               <li >
                  <a title="object" href="../../api/object.js/#start">object</a>
               </li>
               
               <li >
                  <a title="storage" href="../../api/storage.js/#start">storage</a>
               </li>
               
               <li >
                  <a title="string" href="../../api/string.js/#start">string</a>
               </li>
               
               <li >
                  <a title="theme_manager" href="../../api/theme_manager.js/#start">theme_manager</a>
               </li>
               
            </ul>
         </li>
      
   
      
         <li class="main ax-collapse " >
            <a class="ax-link"
               href="javascript:void(0)"
               title="Contributing"
               data-toggle="collapse"
               data-target="#Contributing"
               aria-expanded="false"
               aria-controls="collapseExample">Contributing <span class="caret"></span></a>

            <ul class="nav subnav collapse"
               id="Contributing">
               
               <li >
                  <a title="LaxarJS Coding Styles" href="../../contributing/styleguide/#start">LaxarJS Coding Styles</a>
               </li>
               
            </ul>
         </li>
      
   
      
         <li class="main ax-collapse ax-active" >
            <a class="ax-link"
               href="javascript:void(0)"
               title="Manuals"
               data-toggle="collapse"
               data-target="#Manuals"
               aria-expanded="false"
               aria-controls="collapseExample">Manuals <span class="caret"></span></a>

            <ul class="nav subnav in"
               id="Manuals">
               
               <li >
                  <a title="Overview" href="../#start">Overview</a>
               </li>
               
               <li >
                  <a title="Assets and the FileResourceProvider" href="../asset_lookup/#start">Assets and the FileResourceProvider</a>
               </li>
               
               <li >
                  <a title="Configuration" href="../configuration/#start">Configuration</a>
               </li>
               
               <li >
                  <a title="Configuring RequireJS for Widgets and Controls" href="../configuring_requirejs/#start">Configuring RequireJS for Widgets and Controls</a>
               </li>
               
               <li >
                  <a title="Controls and Libraries" href="../providing_controls/#start">Controls and Libraries</a>
               </li>
               
               <li >
                  <a title="Creating Themes" href="../creating_themes/#start">Creating Themes</a>
               </li>
               
               <li class="ax-active">
                  <a title="Creating an Adapter for a new Widget Technology" href="./#start">Creating an Adapter for a new Widget Technology</a>
               </li>
               
               <li >
                  <a title="Events and Publish-Subscribe" href="../events/#start">Events and Publish-Subscribe</a>
               </li>
               
               <li >
                  <a title="Flow and Places" href="../flow_and_places/#start">Flow and Places</a>
               </li>
               
               <li >
                  <a title="Infrastructure and Tools" href="../infrastructure_and_tools/#start">Infrastructure and Tools</a>
               </li>
               
               <li >
                  <a title="Installing Controls" href="../installing_controls/#start">Installing Controls</a>
               </li>
               
               <li >
                  <a title="Installing Third Party Widgets" href="../installing_widgets/#start">Installing Third Party Widgets</a>
               </li>
               
               <li >
                  <a title="Internationalizing a Widget" href="../i18n/#start">Internationalizing a Widget</a>
               </li>
               
               <li >
                  <a title="Widgets and Activities" href="../widgets_and_activities/#start">Widgets and Activities</a>
               </li>
               
               <li >
                  <a title="Working with Visibility Events" href="../visibility_events/#start">Working with Visibility Events</a>
               </li>
               
               <li >
                  <a title="Writing Compositions" href="../writing_compositions/#start">Writing Compositions</a>
               </li>
               
               <li >
                  <a title="Writing Pages" href="../writing_pages/#start">Writing Pages</a>
               </li>
               
               <li >
                  <a title="Writing Widget Controllers" href="../writing_widget_controllers/#start">Writing Widget Controllers</a>
               </li>
               
            </ul>
         </li>
      
   
    </ul>
</div></sidebar>
           <main class="col-sm-8 col-xs-12 " role="main">

<a name="start" class="ax-anchor"></a>
<h1 id="creating-an-adapter-for-a-new-widget-technology">Creating an Adapter for a new Widget Technology</h1>
<p><a href="../">Â« return to the manuals</a></p>
<p>LaxarJS widgets do not have to be written using AngularJS.
While <a href="http://laxarjs.github.io/widget-browser">our own widgets</a> are usually written in AngularJS, this should not prevent you from using an (MVC) framework of your choice, such as <a href="http://backbonejs.org">Backbone.js</a>, <a href="http://knockoutjs.com/">Knockout</a> or <a href="https://facebook.github.io/react/">React</a>.</p>
<p>For developing a widget with React we provide the <a href="https://github.com/LaxarJS/laxar-react-adapter">laxar-react-adapter</a>.
Two examples for widgets with React we use in a demo or developer tools are the <a href="https://github.com/LaxarJS/shop-demo/tree/master/includes/widgets/shop-demo/article-teaser-widget">article-teaser-widget</a> and the <a href="https://github.com/LaxarJS/ax-developer-tools-widget/tree/master/content/includes/widgets/page-inspector-widget">page-inspector-widget</a>.</p>
<p>Preliminary readings:</p>
<ul>
<li><a href="../widgets_and_activities/">Widgets and Activities</a></li>
<li><a href="../infrastructure_and_tools/">Infrastructure and Tools</a></li>
</ul>
<p>Because widgets communicate through the event bus only, you could rewrite any widget within your application in any framework you like, and none of the other widgets would be any the wiser.
This is a great way to upgrade step-by-step from an older technology to newer tools, because only a single widget at a time is at risk, not your entire application.</p>
<p>Of course, to achieve a great user experience, you do not want to include an excessive number of frameworks and libraries into your application:
As you add libraries, page load times will increase and with it user satisfaction will suffer.
However, LaxarJS does not want you to be locked into using any specific implementation technology for your widgets.
If used appropriately, <em>custom widget adapters</em> can make it easier by leaps and bounds to integrate with legacy code or third-party widgets, simply helping you to be more productive.</p>
<p>Even if you are not interested in writing your own widget adapter, lecture of this manual is a good way to gain an in-depth understanding on the LaxarJS widget lifecycle.</p>
<h2 id="the-role-of-widget-adapters">The Role of Widget Adapters</h2>
<p>The <a href="../infrastructure_and_tools/">Infrastructure and Tools</a> manual explains how the page controller sets up widgets and activities when entering a page.
Since that is a somewhat simplified explanation, let us look into it in more detail:</p>
<ul>
<li>
<p>The <em>page controller</em> uses the <em>page loader</em> to expand compositions and to obtain a single static model of all areas on a page, and for each area, a model of its configured widgets.
At this point, the composition parameter names have been substituted by their values and unique widget IDs have been generated, but default values for the widget features have not been applied yet.</p>
</li>
<li>
<p>For each configured widget instance, the page controller asks the <em>widget loader</em> to provide it with a widget adapter for that instance, to control widget lifecycle.
The widget controller written in JavaScript has already been loaded as an AMD module when entering the application.
The loader fetches the <em>widget.json</em>, and knows how to get the widget template and CSS style sheet, if applicable.
Of course, all assets are loaded only once, even if a widget is instantiated several times during the lifetime of an application or even on the same page.
All widgets are loaded asynchronously and in parallel, so there is no unnecessary delay.
In production mode, all assets are served from the configured file listings, so that this process may happen very quickly.</p>
</li>
<li>
<p>As soon as the widget loader has loaded the <em>widget.json</em> for a widget instance, it validates the feature configuration and fills in missing default values.
Next, it sets up an event-bus wrapper for the widget, that always fills in the <em>sender</em> (on publish) and <em>subscriber</em> (on subscribe) with the widget id.
This wrapper also ensures that the widget is unsubscribed from all events when the page is teared down later on.</p>
</li>
<li>
<p>Now all that is left to do is kicking off the widget controller with the augmented feature configuration, and loading and instantiating the widget template.
Both of these steps are specific to the implementation technology of the widget.
For AngularJS, a new <em>scope</em> is created for the controller, and the controller class is instantiated using the AngularJS <code>$controller</code> service.
As soon as the widget becomes visible (usually right away, but possibly only after its containing popup/tab/panel/... is shown), the template is compiled, linked to the new scope, and inserted into the page DOM.
These tasks are performed by the <em>widget adapter</em>, selected based on the integration technology that is declared in the <em>widget.json.</em>
LaxarJS ships with adapters for two integration technologies: <em>angular</em> and <em>plain</em>.
The <em>plain</em> adapter requires no additional dependencies, and is meant for widgets that directly access the browser DOM for their rendering.</p>
</li>
</ul>
<h2 id="the-integration-technology-api">The Integration Technology API</h2>
<p>Each widget integration technology is implemented as an AMD module with these properties:</p>
<ul>
<li>
<p>The <code>technology</code> is a string that identifies the widget adapter.
  It is compared to the <code>integration.technology</code> field of each <em>widget.json</em> to determine which adapter must be used for each widget in the application.</p>
</li>
<li>
<p>The method <code>bootstrap</code> is called once during application startup to initialize support for the integration technology.
  It receives an array of AMD-modules, one for each matching widget module used by the application.
  The API of the widget modules depends on the integration technology, but usually there is at least a <code>name</code> to associate the modules to their <em>widget.json,</em> a method to instantiate a controller for a given widget instance, and possibly a method to set up a view.
  For the <em>angular</em> integration, the widget module simply yields the corresponding AngularJS module, so that controllers can be instantiated by using the AngularJS <code>$controller</code> service.
  For the <em>plain</em> integration, the widget module must have a method <code>create</code> to instantiate the controller, and optionally an array <code>injections</code> to specify services required by the widget, such as the event bus.
  These injections are used as arguments to <code>create</code> in the order that they are listed in <code>injections</code>.</p>
</li>
<li>
<p>The method <code>create</code> is a factory that actually creates the widget adapter for a given widget instance.
  Each widget instance has its own adapter instance, so that the adapter is free to maintain state information specific to the current widget instance, as may be required by the integration technology.
  For each widget to be instantiated, <code>create</code> is called with an <em>environment</em> object containing the instance configuration and other context information for the widget controller, chiefly the instance's handle to the event bus.</p>
</li>
<li>
<p>Optionally an adapter may provide a method called <code>applyViewChanges</code>.
  Whenever the <em>LaxarJS</em> runtime carried out some task that may have tampered with the model of one or more widgets, like the asynchronous delivery of event bus events, this method gets called.
  It should then do whatever necessary to achieve consistency again.
  In case of <em>AngularJS</em> this is a call to <code>$rootScope.$apply()</code>, while the plain adapter simply does nothing.</p>
</li>
</ul>
<p>Before going into details on the widget adapter API, let us have a look at the environment that is used to create widget adapters.</p>
<h3 id="the-widget-loader-environment">The Widget Loader Environment</h3>
<p>Before creating an adapter, the widget loader collects all required information and bundles it into an <em>environment</em> object.
The environment has the following properties:</p>
<ul>
<li>
<p>The <code>context</code> object contains information that may be of use to the widget controller:</p>
<ul>
<li>
<p><code>eventBus</code>: a handle to the event bus instance for this widget</p>
</li>
<li>
<p><code>features</code>: the complete feature configuration for this instance, with defaults filled in from the widget configuration schema.</p>
</li>
<li>
<p><code>id</code>: a function that takes a string and returns a unique ID that may be given to a DOM-element of this widget instance.
This is mainly intended to associate form controls with their labels (using the HTML attributes <code>id</code> and <code>for</code>), without breaking multiple widget instances on a single page.</p>
</li>
<li>
<p><code>widget</code>: only rarely needed, this object provides additional meta information about the widget.
There is the containing <code>area</code> name, the instance <code>id</code> as a string and the <code>path</code> that was used to instantiate the widget.</p>
</li>
</ul>
</li>
</ul>
<p>Adapters are supposed to make the context available to widget controllers, preferably through an injection <code>axContext</code>.
  The <em>angular</em> adapter provides this injection as a lightweight alternative to the <code>$scope</code> injection, which has the same properties.</p>
<ul>
<li>
<p>The <code>anchorElement</code> is a standard HTMLElement meant to contain all widget view UI.
  If the adapter uses a templating system, the instantiated template should be appended to this anchor.
  It automatically gets assigned an ID matching the widget ID, which is useful to identify a widget within the DOM, and a CSS class which should be used to restrict styles to the widget.
  If necessary, Widgets may manipulate DOM outside of their anchor, for example to show an overlay.
  But if they do, they are responsible for cleanup, and they should never modify the DOM of other widgets.</p>
</li>
<li>
<p>The <code>specification</code> contains the widget meta information from the <em>widget.json.</em>
  This information is not intended to be passed through to the widget controller.
  Instead, it may help the widget adapter to determine the widget name, and if the current widget is a regular widget or an activity.
  Depending on the integration technology, different fields from the specification may be useful.</p>
</li>
</ul>
<p>Having been created from an environment, all widget adapter instances expose the same set of methods which are called by their widget loader to control widget setup and teardown.</p>
<h3 id="the-widget-adapter-api">The Widget Adapter API</h3>
<p>All widget adapters must implement the following four methods, to support creation and destruction of controller and view:</p>
<ul>
<li><code>createController</code>: called to instantiate the widget controller.
  The argument is a config map, currently only having an <code>onBeforeControllerCreation</code> function as single property.
  This function acts as integration point for widget tests and should be called by the adapter just before the controller is instantiated.
  It expects the <code>environment</code> as first and all readily prepared injections for the widget as second argument.</li>
</ul>
<p>When instantiating the widget controller, the adapter must provide it with the <code>context</code> from the widget loader environment.
  Because the view has not been setup at this point in time, the adapter should not yet manipulate the anchor element, nor make it available to the widget controller.</p>
<ul>
<li>
<p><code>domAttachTo</code>: called with a widget area as the first argument, and an optional (template) HTML string as the second argument.
  The adapter is supposed to instantiate the template based on its implementation technology, and to associate it to the widget controller.
  Depending on the technology, this may happen through binding, for example through the shared <em>scope</em> created by the <em>angular</em> adapter.
  Alternatively, the adapter may call some technology-specific API of the controller and hand over the template.
  The instantiated template should be appended to the anchor element, which in turn should be appended to the widget area element.
  If there is no template, as is usually the case with activities or sometimes with very simple widgets that only need CSS, the value <code>null</code> is passed as the second parameter.
  In this case, it is up to the widget adapter to decide if the anchor should be added to the DOM anyway, usually based on whether the type is <em>widget</em> or <em>activity</em>.</p>
</li>
<li>
<p><code>domDetach</code>: the counterpart to <code>domAttachTo</code>, this method is used to remove the view from the containing widget area, temporarily or permanently.
  The widget adapter may teardown the template completely, or keep it "warm" for reattachment.
  LaxarJS may ask widget adapters to detach their DOM and later to attach it again, for example to suspend the widget views within a popup window.</p>
</li>
<li>
<p><code>destroy</code>: called only once when a widget instance is removed, usually because the user is navigating away from a page.
  It is not guaranteed that <em>any</em> of the other methods has been called at this point in time, but <em>destroy</em> is supposed to tidy up everything that has been done at this point in time.</p>
</li>
</ul>
<p>For a simple example of a user-defined widget adapter, have a look at this <a href="https://github.com/alex3683/laxar-backbone-adapter">Backbone.js adapter</a>.</p>
<h2 id="using-a-custom-adapter-in-a-project">Using a Custom Adapter in a Project</h2>
<p>To use a custom integration technology, the corresponding AMD-module must be passed to the LaxarJS <code>bootstrap</code> method.
This means that when working on a project that was created by the <a href="//github.com/LaxarJS/generator-laxarjs">LaxarJS Yeoman generator</a>, the <code>init.js</code> must <code>require</code> the corresponding module, wrap it in an array and pass that array to <code>ax.bootstrap</code>.
Of course, the widgets written for this integration technology must state so in their <em>widget.json.</em></p></main>
        </div>
      </div>

      <footer>
   <div class="container">
      <div class="ax-copyright">
         <span>
            
         </span>

         <ul class="ax-social">
            
               <li><a class="fa fa-twitter-square" target="_blank" href="https://twitter.com/laxarjs"></a></li>
            
            
               <li><a class="fa fa-rss-square" target="_blank" title="Subscribe to our RSS-feed" href="http://laxarjs.org/rss"></a></li>
            
         </ul>
      </div>
   </div>
</footer>

      <script src="../../../laxar.theme/js/jquery-1.10.2.min.js"></script>
      <script src="../../../laxar.theme/js/bootstrap-3.0.3.min.js"></script>
      <script src="../../../laxar.theme/js/base.js"></script>
   </body>
</html>